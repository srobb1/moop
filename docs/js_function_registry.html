<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JS Function Registry - MOOP</title>
<style>
* { margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; color: #333; }
.container { max-width: 1400px; margin: 0 auto; padding: 20px; }
header { background: #2c3e50; color: white; padding: 30px 0; margin: -20px -20px 30px -20px; }
header h1 { margin-bottom: 10px; }
header p { opacity: 0.9; }
.stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
.stat-box { background: white; padding: 20px; border-radius: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); text-align: center; }
.stat-box strong { display: block; font-size: 24px; color: #3498db; }
.stat-box span { font-size: 12px; color: #666; }
.file-section { background: white; margin: 20px 0; border-radius: 4px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.file-header { background: #34495e; color: white; padding: 15px 20px; font-weight: bold; cursor: pointer; user-select: none; }
.file-header:hover { background: #2c3e50; }
.file-header.collapsed:before { content: '‚ñ∂ '; }
.file-header:not(.collapsed):before { content: '‚ñº '; }
.file-info { background: #e8f4f8; padding: 15px 20px; border-bottom: 1px solid #bdc3c7; font-size: 12px; color: #555; }
.file-info strong { color: #2c3e50; }
.php-pages { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
.php-page { background: white; padding: 4px 10px; border-radius: 3px; border: 1px solid #3498db; color: #3498db; font-family: monospace; font-size: 11px; }
.functions-list { display: block; }
.functions-list.hidden { display: none; }
.function-item { padding: 0; border-bottom: 1px solid #ecf0f1; }
.function-item:last-child { border-bottom: none; }
.function-header { background: #f0f0f0; padding: 12px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.function-header:hover { background: #e0e0e0; }
.function-name { font-family: 'Courier New', monospace; color: #2980b9; font-weight: 500; }
.function-counter { display: inline-flex; align-items: center; justify-content: center; background: #3498db; color: white; border-radius: 50%; width: 28px; height: 28px; font-size: 12px; font-weight: bold; margin-left: 8px; flex-shrink: 0; }
.expand-arrow { display: inline-flex; align-items: center; justify-content: center; font-size: 16px; margin-left: 10px; flex-shrink: 0; }
.function-line { font-size: 11px; color: #7f8c8d; }
.function-details { padding: 15px 20px; background: white; display: none; }
.function-details.shown { display: block; }
.function-usages { background: #e8f4f8; padding: 12px 15px; margin: 10px 0; border-left: 3px solid #3498db; border-radius: 3px; }
.function-usages strong { display: block; margin-bottom: 8px; color: #2c3e50; }
.function-usages ul { margin: 0; padding-left: 20px; }
.function-usages li { margin: 6px 0; font-size: 12px; color: #555; }
.function-usages code { display: inline; background: white; padding: 2px 6px; border-radius: 3px; border: 1px solid #bbb; }
.function-code { background: #f8f8f8; padding: 15px; margin: 15px 0; border-radius: 4px; border-left: 3px solid #3498db; overflow-x: auto; }
.function-code code { display: block; font-family: 'Courier New', monospace; font-size: 12px; color: #2c3e50; white-space: pre-wrap; word-break: break-word; line-height: 1.5; }
.search-box { margin: 20px 0; }
input[type="text"] { width: 100%; padding: 12px; font-size: 16px; border: 1px solid #ddd; border-radius: 4px; }
.file-section.hidden-search { display: none; }
.function-item.hidden-search { display: none; }
.unused-section { background: #ffe6e6; border: 2px solid #cc0000; border-radius: 4px; overflow: hidden; margin: 20px 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
.unused-header { background: #cc0000; color: white; padding: 15px 20px; font-weight: bold; cursor: pointer; user-select: none; display: flex; justify-content: space-between; align-items: center; }
.unused-header:hover { background: #bb0000; }
.unused-content { padding: 20px; }
.hidden { display: none !important; }
</style>
</head>
<body>
<header>
<div class="container">
<h1>üîç MOOP JavaScript Function Registry</h1>
<p>Auto-generated function documentation ‚Ä¢ Generated: 2025-12-08 20:14:29</p>
</div>
</header>
<div class="container">
<div class="search-box">
<div style="margin-bottom: 15px;">
<input type="text" id="searchInput" placeholder="üîç Search..." onkeyup="filterSearch()">
</div>
<div style="display: flex; gap: 20px; flex-wrap: wrap; padding: 10px; background: #f9f9f9; border-radius: 4px;">
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input type="radio" name="searchMode" value="all" checked onchange="filterSearch()" style="cursor: pointer;">
<span>Search All</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input type="radio" name="searchMode" value="name" onchange="filterSearch()" style="cursor: pointer;">
<span>Function Names Only</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input type="radio" name="searchMode" value="code" onchange="filterSearch()" style="cursor: pointer;">
<span>Code Only</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input type="radio" name="searchMode" value="comment" onchange="filterSearch()" style="cursor: pointer;">
<span>Comments Only</span>
</label>
</div>
</div>
<div class="stats">
<div class="stat-box"><strong>105</strong><span>Total Functions</span></div>
<div class="stat-box"><strong>20</strong><span>Files</span></div>
</div>
<div class="unused-section">
<div class="unused-header" onclick="toggleUnused(this)">
<span>‚ö†Ô∏è 7 Unused Function(s) Found</span>
<span class="unusedArrow">‚ñ∂</span>
</div>
<div class="unused-content hidden">
<p style="margin: 10px 0; color: #555;">These functions are defined but never called:</p>
<ul style="margin: 10px 0; padding-left: 20px;">
<li><strong style="color: #cc0000;">downloadResultsHTML()</strong> in <code>js/blast-manager.js</code> (line 9)</li>
<li><strong style="color: #cc0000;">handleToolClick()</strong> in <code>js/index.js</code> (line 2)</li>
<li><strong style="color: #cc0000;">fixFilePermissions()</strong> in <code>js/permission-manager.js</code> (line 16)</li>
<li><strong style="color: #cc0000;">md5()</strong> in <code>js/permission-manager.js</code> (line 79)</li>
<li><strong style="color: #cc0000;">draw_blast_graph()</strong> in <code>js/modules/blast-canvas-graph.js</code> (line 2)</li>
<li><strong style="color: #cc0000;">move_bg_rect()</strong> in <code>js/modules/blast-canvas-graph.js</code> (line 437)</li>
<li><strong style="color: #cc0000;">updateRegistry()</strong> in <code>js/modules/manage-registry.js</code> (line 9)</li>
</ul>
</div>
</div>
<div style="display: flex; gap: 10px; margin: 20px 0;">
<button id="toggleBtn" onclick="toggleAll()" style="flex: 1; padding: 10px; background: #95a5a6; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">üìÇ Expand All</button>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/blast-manager.js (7)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/blast.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">downloadResultsHTML()</span><span class="function-counter">0</span> <span class="function-line">Line 9</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: downloadResultsHTML()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{
    const resultsCard = document.querySelector(&#039;.card&#039;);
    if (!resultsCard) return;
    
    const content = resultsCard.innerHTML;
    const blob = new Blob([content], { type: &#039;text/html&#039; });
    const url = URL.createObjectURL(blob);
    const link = document.createElement(&#039;a&#039;);
    link.href = url;
    link.download = &#039;blast_results_&#039; + new Date().toISOString().slice(0, 10) + &#039;.html&#039;;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revo</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">downloadResultsText()</span><span class="function-counter">1</span> <span class="function-line">Line 25</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: downloadResultsText()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 604</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-secondary&quot; onclick=&quot;downloadResultsText();&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const pairwiseDiv = document.getElementById(&#039;pairwiseOutput&#039;);
    if (!pairwiseDiv) {
        alert(&#039;No BLAST results to download&#039;);
        return;
    }
    
    const textContent = pairwiseDiv.textContent || pairwiseDiv.innerText;
    const blob = new Blob([textContent], { type: &#039;text/plain&#039; });
    const url = URL.createObjectURL(blob);
    const link = document.createElement(&#039;a&#039;);
    link.href = url;
    link.download = &#039;blast_results_&#039; + new Date().toISOString().slice(0, 10) + &#039;.tx</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearResults()</span><span class="function-counter">1</span> <span class="function-line">Line 44</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: clearResults()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 597</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-light&quot; onclick=&quot;clearResults();&quot; title=&quot;Clear results an</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const resultsCard = document.querySelector(&#039;.mt-4.card&#039;);
    if (resultsCard) {
        resultsCard.remove();
    }
    document.getElementById(&#039;query&#039;).focus();
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearBlastSourceFilters()</span><span class="function-counter">1</span> <span class="function-line">Line 52</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: clearBlastSourceFilters()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 325</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot; onclick=&quot;clearBlastSourceFilters();&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    window.clearSourceFilters(&#039;sourceFilter&#039;, &#039;selected_source&#039;, &#039;fasta-source-line&#039;, null, &#039;blastForm&#039;);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeBlastManager()</span><span class="function-counter">2</span> <span class="function-line">Line 56</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: initializeBlastManager()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 244</code>: <small>initializeBlastManager();</small></li>
<li><code>line 249</code>: <small>initializeBlastManager();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    function updateCurrentSelectionDisplay() {
        window.updateCurrentSelectionDisplay();
        const selectionDiv = document.getElementById(&#039;currentSelection&#039;);
        const checked = document.querySelector(&#039;input[name=&quot;selected_source&quot;]:checked&#039;);
        if (!checked) {
            selectionDiv.innerHTML = &#039;&lt;span style=&quot;color: #999;&quot;&gt;None selected&lt;/span&gt;&#039;;
        }
    }
    
    // Initialize source list manager with callback
    initializeSourceListManager({
        filterId: &#039;so</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateCurrentSelectionDisplay()</span><span class="function-counter">8</span> <span class="function-line">Line 58</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: updateCurrentSelectionDisplay()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (8 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 59</code>: <small>window.updateCurrentSelectionDisplay();</small></li>
<li><code>line 74</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 95</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 139</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 71</code>: <small>window.updateCurrentSelectionDisplay(&#039;currentSelection&#039;, &#039;fasta-source-line&#039;, true);</small></li>
<li><code>line 91</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 106</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 155</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
        window.updateCurrentSelectionDisplay();
        const selectionDiv = document.getElementById(&#039;currentSelection&#039;);
        const checked = document.querySelector(&#039;input[name=&quot;selected_source&quot;]:checked&#039;);
        if (!checked) {
            selectionDiv.innerHTML = &#039;&lt;span style=&quot;color: #999;&quot;&gt;None selected&lt;/span&gt;&#039;;
        }
    }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">autoScrollToResults()</span><span class="function-counter">3</span> <span class="function-line">Line 231</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/blast-manager.js: autoScrollToResults()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (3 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 245</code>: <small>autoScrollToResults();</small></li>
<li><code>line 250</code>: <small>autoScrollToResults();</small></li>
</ul></li>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 703</code>: <small>autoScrollToResults();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    document.addEventListener(&#039;DOMContentLoaded&#039;, function() {
        const resultsSection = document.getElementById(&#039;blast-results-section&#039;);
        if (resultsSection) {
            resultsSection.scrollIntoView({ behavior: &#039;smooth&#039;, block: &#039;start&#039; });
        }
    });
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/index.js (2)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/pages/index.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">handleToolClick()</span><span class="function-counter">0</span> <span class="function-line">Line 2</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/index.js: handleToolClick()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{
  if (!phyloTree || phyloTree.selectedOrganisms.size === 0) {
    alert(&#039;Please select at least one organism&#039;);
    return;
  }
  
  // Get tool button and its configuration
  const toolBtn = document.getElementById(`tool-btn-${toolId}`);
  if (!toolBtn) {
    console.error(`Tool button not found: tool-btn-${toolId}`);
    return;
  }
  
  const toolPath = toolBtn.getAttribute(&#039;data-tool-path&#039;);
  const contextParamsJson = toolBtn.getAttribute(&#039;data-context-params&#039;);
  
  if (!toolPath || !con</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">switchView()</span><span class="function-counter">2</span> <span class="function-line">Line 50</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/index.js: switchView()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>tools/pages/index.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 36</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-outline-primary active&quot; id=&quot;card-view-btn&quot; onclick=&quot;switchView(</small></li>
<li><code>line 39</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-outline-primary&quot; id=&quot;tree-view-btn&quot; onclick=&quot;switchView(&#039;tree&#039;)</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const cardView = document.getElementById(&#039;card-view&#039;);
  const treeView = document.getElementById(&#039;tree-view&#039;);
  const cardBtn = document.getElementById(&#039;card-view-btn&#039;);
  const treeBtn = document.getElementById(&#039;tree-view-btn&#039;);
  
  if (view === &#039;card&#039;) {
    cardView.style.display = &#039;block&#039;;
    treeView.style.display = &#039;none&#039;;
    cardBtn.classList.add(&#039;active&#039;);
    treeBtn.classList.remove(&#039;active&#039;);
  } else {
    cardView.style.display = &#039;none&#039;;
    treeView.style.display = &#039;block&#039;</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/manage-registry.js (13)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_js_registry.php</span>
<span class="php-page">admin/manage_registry.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renderRegistry()</span><span class="function-counter">6</span> <span class="function-line">Line 32</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: renderRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (6 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 13</code>: <small>renderRegistry();</small></li>
<li><code>line 464</code>: <small>renderRegistry();</small></li>
<li><code>line 475</code>: <small>renderRegistry();</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 362</code>: <small>renderRegistry();</small></li>
<li><code>line 695</code>: <small>renderRegistry();</small></li>
<li><code>line 706</code>: <small>renderRegistry();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    if (!registryData || !registryData.files) {
        return;
    }
    
    const container = document.getElementById(&#039;filesContainer&#039;);
    if (!container) {
        return;
    }
    
    container.innerHTML = &#039;&#039;;
    
    let fileCount = 0;
    registryData.files.forEach(fileData =&gt; {
        fileCount++;
        const fileSection = document.createElement(&#039;div&#039;);
        fileSection.className = &#039;file-section&#039;;
        fileSection.style.overflow = &#039;visible&#039;;
        fileSection.setAttribu</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleFile()</span><span class="function-counter">5</span> <span class="function-line">Line 168</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: toggleFile()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (5 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 161</code>: <small>toggleFile(header);</small></li>
</ul></li>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 356</code>: <small>toggleFile(this);</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 405</code>: <small>$html .= &quot;            &lt;div class=\&quot;file-header\&quot; onclick=\&quot;toggleFile(this)\&quot;&gt;üìÑ &quot; . htmlspecialch</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 390</code>: <small>header.onclick = function() { toggleFile(this); };</small></li>
<li><code>line 494</code>: <small>toggleFile(this);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const list = header.nextElementSibling;
    if (list &amp;&amp; list.classList.contains(&#039;functions-list&#039;)) {
        const isOpen = list.classList.contains(&#039;open&#039;);
        list.classList.toggle(&#039;open&#039;);
        
        console.log(&#039;=== toggleFile Debug ===&#039;);
        console.log(&#039;isOpen before:&#039;, isOpen);
        console.log(&#039;classList after toggle:&#039;, list.className);
        console.log(&#039;Has open class now:&#039;, list.classList.contains(&#039;open&#039;));
        
        // Force inline styles to ensure vi</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleFunctionCode()</span><span class="function-counter">2</span> <span class="function-line">Line 203</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: toggleFunctionCode()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 73</code>: <small>funcHeader.onclick = function() { toggleFunctionCode(this); };</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 407</code>: <small>funcHeader.onclick = function() { toggleFunctionCode(this); };</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const item = header.closest(&#039;.function-item&#039;);
    if (!item) return;
    
    const code = item.querySelector(&#039;.function-code&#039;);
    if (code) {
        code.classList.toggle(&#039;open&#039;);
        const arrow = header.querySelector(&#039;.expand-arrow&#039;);
        if (arrow) {
            arrow.textContent = code.classList.contains(&#039;open&#039;) ? &#039;‚ñº&#039; : &#039;‚ñ∂&#039;;
        }
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleUnusedSection()</span><span class="function-counter">2</span> <span class="function-line">Line 220</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: toggleUnusedSection()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 25</code>: <small>toggleUnusedSection(this);</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 323</code>: <small>&lt;div class=&quot;card-header bg-danger text-white&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;toggleUnusedSection(</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const content = header.nextElementSibling;
    if (content &amp;&amp; content.classList.contains(&#039;unused-content&#039;)) {
        content.classList.toggle(&#039;hidden&#039;);
        const arrow = header.querySelector(&#039;.unused-arrow&#039;);
        if (arrow) {
            arrow.textContent = content.classList.contains(&#039;hidden&#039;) ? &#039;‚ñ∂&#039; : &#039;‚ñº&#039;;
        }
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleAll()</span><span class="function-counter">4</span> <span class="function-line">Line 234</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: toggleAll()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 263</code>: <small>toggleAll();</small></li>
</ul></li>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 226</code>: <small>toggleAll();</small></li>
</ul></li>
<li><strong>tools/generate_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 306</code>: <small>$html .= &quot;&lt;button id=\&quot;toggleBtn\&quot; onclick=\&quot;toggleAll()\&quot; style=\&quot;flex: 1; padding: 10px; backgroun</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 398</code>: <small>$html .= &quot;            &lt;button id=\&quot;toggleBtn\&quot; onclick=\&quot;toggleAll()\&quot; style=\&quot;flex: 1; padding: 10p</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const lists = document.querySelectorAll(&#039;.functions-list&#039;);
    const hiddenCount = document.querySelectorAll(&#039;.functions-list:not(.open)&#039;).length;
    
    lists.forEach(list =&gt; {
        if (hiddenCount &gt; 0) {
            list.classList.add(&#039;open&#039;);
            // Apply inline styles for open state
            list.style.maxHeight = &#039;10000px&#039;;
            list.style.overflow = &#039;visible&#039;;
        } else {
            list.classList.remove(&#039;open&#039;);
            // Apply inline styles for cl</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 261</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: toggleAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 311</code>: <small>&lt;button class=&quot;btn btn-sm btn-light&quot; onclick=&quot;toggleAllFiles()&quot; title=&quot;Toggle all sections&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    toggleAll();
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">expandAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 268</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: expandAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 96</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;expandAllFiles()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    document.querySelectorAll(&#039;.functions-list&#039;).forEach(list =&gt; {
        list.classList.add(&#039;open&#039;);
        list.style.maxHeight = &#039;10000px&#039;;
        list.style.overflow = &#039;visible&#039;;
        const header = list.previousElementSibling;
        if (header) {
            const arrow = header.querySelector(&#039;.expand-arrow&#039;);
            if (arrow) arrow.textContent = &#039;‚ñº&#039;;
        }
    });
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">collapseAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 284</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: collapseAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 99</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;collapseAllFiles()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    document.querySelectorAll(&#039;.functions-list&#039;).forEach(list =&gt; {
        list.classList.remove(&#039;open&#039;);
        list.style.maxHeight = &#039;0&#039;;
        list.style.overflow = &#039;hidden&#039;;
        const header = list.previousElementSibling;
        if (header) {
            const arrow = header.querySelector(&#039;.expand-arrow&#039;);
            if (arrow) arrow.textContent = &#039;‚ñ∂&#039;;
        }
    });
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">filterRegistry()</span><span class="function-counter">17</span> <span class="function-line">Line 300</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: filterRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (17 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 364</code>: <small>filterRegistry();</small></li>
</ul></li>
<li><strong>admin/pages/manage_js_registry.php</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 133</code>: <small>onkeyup=&quot;filterRegistry()&quot;</small></li>
<li><code>line 141</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchAll&quot; value=&quot;all&quot; checked on</small></li>
<li><code>line 145</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchName&quot; value=&quot;name&quot; onchange</small></li>
<li><code>line 149</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchCode&quot; value=&quot;code&quot; onchange</small></li>
<li><code>line 153</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchComment&quot; value=&quot;comment&quot; on</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 133</code>: <small>onkeyup=&quot;filterRegistry()&quot;</small></li>
<li><code>line 141</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchAll&quot; value=&quot;all&quot; checked on</small></li>
<li><code>line 145</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchName&quot; value=&quot;name&quot; onchange</small></li>
<li><code>line 149</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchCode&quot; value=&quot;code&quot; onchange</small></li>
<li><code>line 153</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchComment&quot; value=&quot;comment&quot; on</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (6x)
<ul style="margin-top: 5px;">
<li><code>line 266</code>: <small>onkeyup=&quot;filterRegistry()&quot;</small></li>
<li><code>line 274</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchAll&quot; value=&quot;all&quot; checked on</small></li>
<li><code>line 278</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchName&quot; value=&quot;name&quot; onchange</small></li>
<li><code>line 282</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchCode&quot; value=&quot;code&quot; onchange</small></li>
<li><code>line 286</code>: <small>&lt;input class=&quot;form-check-input&quot; type=&quot;radio&quot; name=&quot;searchMode&quot; id=&quot;searchComment&quot; value=&quot;comment&quot; on</small></li>
<li><code>line 640</code>: <small>filterRegistry();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const searchInput = document.getElementById(&#039;searchInput&#039;);
    const searchMode = document.querySelector(&#039;input[name=&quot;searchMode&quot;]:checked&#039;);
    
    if (!searchInput || !searchMode) return;
    
    const term = searchInput.value.toLowerCase();
    const mode = searchMode.value;
    
    document.querySelectorAll(&#039;.file-section&#039;).forEach(section =&gt; {
        const fileName = section.getAttribute(&#039;data-file&#039;).toLowerCase();
        let hasVisibleFunc = false;
        
        section.que</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearSearch()</span><span class="function-counter">4</span> <span class="function-line">Line 359</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: clearSearch()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 160</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 160</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 102</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 293</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const searchInput = document.getElementById(&#039;searchInput&#039;);
    if (searchInput) {
        searchInput.value = &#039;&#039;;
        filterRegistry();
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">downloadRegistry()</span><span class="function-counter">4</span> <span class="function-line">Line 370</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: downloadRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 63</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 63</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 46</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 207</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    if (!registryData) return;
    
    const dataStr = JSON.stringify(registryData, null, 2);
    const blob = new Blob([dataStr], {type: &#039;application/json&#039;});
    const url = URL.createObjectURL(blob);
    const link = document.createElement(&#039;a&#039;);
    link.href = url;
    link.download = &#039;function_registry_&#039; + new Date().toISOString().slice(0, 10) + &#039;.json&#039;;
    link.click();
    URL.revokeObjectURL(url);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">generateRegistry()</span><span class="function-counter">4</span> <span class="function-line">Line 386</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: generateRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 58</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 58</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 41</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 202</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const btn = document.getElementById(&#039;generateBtn&#039;);
    const msg = document.getElementById(&#039;registryMessage&#039;);
    
    if (!btn) return;
    
    // Get registry type from button data attribute (default to &#039;php&#039;)
    const registryType = btn.getAttribute(&#039;data-registry-type&#039;) || &#039;php&#039;;
    
    btn.disabled = true;
    btn.innerHTML = &#039;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Generating...&#039;;
    
    // Call the backend API to generate registry
    fetch(&#039;/moop/admin/api/generate_registry.p</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">htmlEscape()</span><span class="function-counter">10</span> <span class="function-line">Line 450</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/manage-registry.js: htmlEscape()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (10 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 57</code>: <small>üìÑ ${htmlEscape(fileData.name)} &lt;span class=&quot;file-count&quot;&gt;(${fileData.count})&lt;/span&gt;</small></li>
<li><code>line 76</code>: <small>&lt;span class=&quot;function-name&quot;&gt;${htmlEscape(func.name)}()&lt;/span&gt;</small></li>
<li><code>line 117</code>: <small>html += `&lt;li&gt;&lt;strong&gt;${htmlEscape(file)}&lt;/strong&gt; (${usages.length}x)</small></li>
<li><code>line 121</code>: <small>html += `&lt;li&gt;&lt;code&gt;line ${usage.line}&lt;/code&gt;: &lt;small&gt;${htmlEscape(usage.context.substring(0, 80))}&lt;/</small></li>
<li><code>line 136</code>: <small>code.innerHTML = `&lt;pre&gt;${htmlEscape(func.code)}&lt;/pre&gt;`;</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 392</code>: <small>üìÑ ${htmlEscape(fileData.name)} &lt;span class=&quot;file-count&quot;&gt;(${fileData.count})&lt;/span&gt;</small></li>
<li><code>line 410</code>: <small>&lt;span class=&quot;function-name&quot;&gt;${htmlEscape(func.name)}()&lt;/span&gt;</small></li>
<li><code>line 451</code>: <small>html += `&lt;li&gt;&lt;strong&gt;${htmlEscape(file)}&lt;/strong&gt; (${usages.length}x)</small></li>
<li><code>line 455</code>: <small>html += `&lt;li&gt;&lt;code&gt;line ${usage.line}&lt;/code&gt;: &lt;small&gt;${htmlEscape(usage.context.substring(0, 80))}&lt;/</small></li>
<li><code>line 470</code>: <small>code.innerHTML = `&lt;pre&gt;${htmlEscape(func.code)}&lt;/pre&gt;`;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const div = document.createElement(&#039;div&#039;);
    div.textContent = text;
    return div.innerHTML;
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/blast-canvas-graph.js (4)</div>
<div class="functions-list hidden">
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">draw_blast_graph()</span><span class="function-counter">0</span> <span class="function-line">Line 2</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/blast-canvas-graph.js: draw_blast_graph()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{

    var img_height = 2000;
    var img_width = 920;
    var canvas_width = 1000;

    var xscale = +(img_width/seq_length); // to transform sequence length to pixels

    //Create canvas stage
    var kjs_canvas = new Kinetic.Stage({
      container: &quot;myCanvas&quot;,
      width: canvas_width,
      height: 700
    });

    var ksj_layer = new Kinetic.Layer();

    var query_length_text = new Kinetic.Text({
      x: 0,
      y: 35,
      text: &quot;Query length (&quot;+seq_length+&quot;)&quot;,
      fill: &quot;#333&quot;,</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">printRectangles()</span><span class="function-counter">1</span> <span class="function-line">Line 205</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/blast-canvas-graph.js: printRectangles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/blast-canvas-graph.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 198</code>: <small>off_set = printRectangles(kjs_canvas,sgn_graph_array,seq_length,img_width);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{

    var xscale = +(img_width/seq_length); // to transform sequence length to pixels
    var off_set = 80; //just under the horizontal line
    var coord_y = 0;
    var sqr_height = 16;
    var before_block = 20;

    var description;
    var canvas_width = kjs_canvas.width();
    var prev_subject = &quot;grjhg&quot;;

    var rectangle_layer = new Kinetic.Layer();
    kjs_canvas.add(rectangle_layer);

    var popup_layer = new Kinetic.Layer();
    kjs_canvas.add(popup_layer);

    var row = 1;

    //</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">move_bg_rect()</span><span class="function-counter">0</span> <span class="function-line">Line 437</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/blast-canvas-graph.js: move_bg_rect()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{

    pos += 1;

    return pos;
  }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">draw_popup()</span><span class="function-counter">1</span> <span class="function-line">Line 445</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/blast-canvas-graph.js: draw_popup()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/blast-canvas-graph.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 381</code>: <small>draw_popup(canvas_width,blastHit,popup_layer,s_description);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{

    blastHit.on(&#039;mouseover&#039;, function() {


       var desc_group = new Kinetic.Group();

      document.body.style.cursor = &#039;pointer&#039;;
      var hit_x = this.getAbsolutePosition().x + this.width()/2;
      var hit_y = this.getAbsolutePosition().y-26;

      //print subject descriptions
      var subject_desc = new Kinetic.Text({
        x: hit_x,
        y: hit_y-5,
        text: desc,
        fill: &quot;black&quot;,
        fontSize: 16,
        fontFamily: &#039;Helvetica&#039;
      });

       subject_desc</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/copy-to-clipboard.js (2)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/retrieve_selected_sequences.php</span>
<span class="php-page">tools/sequences_display.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeCopyToClipboard()</span><span class="function-counter">1</span> <span class="function-line">Line 6</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/copy-to-clipboard.js: initializeCopyToClipboard()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/copy-to-clipboard.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 81</code>: <small>initializeCopyToClipboard();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    // Handle copy to clipboard for sequences
    const copyables = document.querySelectorAll(&quot;.copyable&quot;);
    copyables.forEach(el =&gt; {
        let resetColorTimeout;
        el.addEventListener(&quot;click&quot;, function () {
            const text = el.innerText.trim();
            navigator.clipboard.writeText(text).then(() =&gt; {
                el.classList.add(&quot;bg-success&quot;, &quot;text-white&quot;);
                if (resetColorTimeout) clearTimeout(resetColorTimeout);
                resetColorTimeout = s</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeCopyTooltips()</span><span class="function-counter">1</span> <span class="function-line">Line 29</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/copy-to-clipboard.js: initializeCopyTooltips()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/copy-to-clipboard.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 26</code>: <small>initializeCopyTooltips();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const copyables = document.querySelectorAll(&quot;.copyable&quot;);
    copyables.forEach(el =&gt; {
        // Custom simple tooltip that follows cursor
        el.addEventListener(&quot;mouseenter&quot;, function() {
            // Remove any existing tooltip
            const existing = document.getElementById(&quot;custom-copy-tooltip&quot;);
            if (existing) existing.remove();
            
            // Create simple tooltip
            const tooltip = document.createElement(&quot;div&quot;);
            tooltip.id =</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/download-handler.js (3)</div>
<div class="functions-list hidden">
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">download()</span><span class="function-counter">1</span> <span class="function-line">Line 10</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/download-handler.js: download()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/download-handler.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 131</code>: <small>} /* end download() */</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
	
	var self = window, // this script is only for browsers anyway...
		u = &quot;application/octet-stream&quot;, // this default mime also triggers iframe downloads
		m = strMimeType || u, 
		x = data,
		D = document,
		a = D.createElement(&quot;a&quot;),
		z = function(a){return String(a);},
		
		
		B = self.Blob || self.MozBlob || self.WebKitBlob || z,
		BB = self.MSBlobBuilder || self.WebKitBlobBuilder || self.BlobBuilder,
		fn = strFileName || &quot;download&quot;,
		blob, 
		b,
		ua,
		fr;

	//if(typ</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">d2b()</span><span class="function-counter">1</span> <span class="function-line">Line 63</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/download-handler.js: d2b()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/download-handler.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 43</code>: <small>navigator.msSaveBlob(d2b(x), fn) :</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
		var p= u.split(/[:;,]/),
		t= p[1],
		dec= p[2] == &quot;base64&quot; ? atob : decodeURIComponent,
		bin= dec(p.pop()),
		mx= bin.length,
		i= 0,
		uia= new Uint8Array(mx);

		for(i;i&lt;mx;++i) uia[i]= bin.charCodeAt(i);

		return new B([uia], {type: t});
	 }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">saver()</span><span class="function-counter">5</span> <span class="function-line">Line 77</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/download-handler.js: saver()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (5 times):</strong>
<ul>
<li><strong>js/modules/download-handler.js</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 44</code>: <small>saver(x) ; // everyone else can save dataURLs un-processed</small></li>
<li><code>line 112</code>: <small>saver(self.URL.createObjectURL(blob), true);</small></li>
<li><code>line 117</code>: <small>return saver( &quot;data:&quot; +  m   + &quot;;base64,&quot;  +  self.btoa(blob)  );</small></li>
<li><code>line 119</code>: <small>return saver( &quot;data:&quot; +  m   + &quot;,&quot; + encodeURIComponent(blob)  );</small></li>
<li><code>line 126</code>: <small>saver(this.result);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
		
		
		if (&#039;download&#039; in a) { //html5 A[download] 			
			a.href = url;
			a.setAttribute(&quot;download&quot;, fn);
			a.innerHTML = &quot;downloading...&quot;;
			D.body.appendChild(a);
			setTimeout(function() {
				a.click();
				D.body.removeChild(a);
				if(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(a.href);}, 250 );}
			}, 66);
			return true;
		}
		
		//do iframe dataURL download (old ch+FF):
		var f = D.createElement(&quot;iframe&quot;);
		D.body.appendChild(f);
		if(!winMod</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-annotations.js (4)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_annotations.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">saveTypeOrder()</span><span class="function-counter">1</span> <span class="function-line">Line 98</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-annotations.js: saveTypeOrder()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-annotations.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 30</code>: <small>saveTypeOrder();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const newOrder = [];
    $(&#039;#sortable-annotation-types .card&#039;).each(function() {
        const type = $(this).data(&#039;type&#039;);
        if (type) {
            newOrder.push(type);
        }
    });
    
    console.log(&#039;saveTypeOrder called&#039;);
    console.log(&#039;Saving annotation type order:&#039;, newOrder);
    console.log(&#039;Order array length:&#039;, newOrder.length);
    
    if (newOrder.length === 0) {
        console.error(&#039;No types found to save!&#039;);
        return;
    }
    
    // Use fetch API</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">showSaveNotification()</span><span class="function-counter">3</span> <span class="function-line">Line 145</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-annotations.js: showSaveNotification()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (3 times):</strong>
<ul>
<li><strong>js/modules/manage-annotations.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 133</code>: <small>showSaveNotification(&#039;Order saved successfully&#039;);</small></li>
<li><code>line 136</code>: <small>showSaveNotification(&#039;Error saving order. Please try again.&#039;, &#039;danger&#039;);</small></li>
<li><code>line 141</code>: <small>showSaveNotification(&#039;Error saving order: &#039; + error.message, &#039;danger&#039;);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const alertDiv = $(&#039;&lt;div&gt;&#039;)
        .addClass(&#039;alert alert-&#039; + type + &#039; alert-dismissible fade show&#039;)
        .attr(&#039;role&#039;, &#039;alert&#039;)
        .html(message + &#039;&lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;alert&quot;&gt;&lt;/button&gt;&#039;);
    
    // Insert at top of page and auto-dismiss after 3 seconds
    $(&#039;main, .container, body&#039;).first().prepend(alertDiv);
    setTimeout(() =&gt; {
        alertDiv.fadeOut(300, function() { $(this).remove(); });
    }, 3000);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleTypeDetails()</span><span class="function-counter">1</span> <span class="function-line">Line 159</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-annotations.js: toggleTypeDetails()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-annotations.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 202</code>: <small>toggleTypeDetails(typeName);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const details = document.getElementById(&#039;details-&#039; + typeName);
  const button = document.querySelector(`[data-type=&quot;${typeName}&quot;].expand-type-btn`);
  if (details) {
    if (details.style.display === &#039;none&#039;) {
      details.style.display = &#039;block&#039;;
      button.querySelector(&#039;i&#039;).className = &#039;fa fa-chevron-up&#039;;
    } else {
      details.style.display = &#039;none&#039;;
      button.querySelector(&#039;i&#039;).className = &#039;fa fa-chevron-down&#039;;
    }
  }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">deleteType()</span><span class="function-counter">1</span> <span class="function-line">Line 174</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-annotations.js: deleteType()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_annotations.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 179</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger mt-2&quot; onclick=&quot;deleteType(&#039;&lt;?= htmlspecialchars($</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  if (confirm(&#039;Delete annotation type &quot;&#039; + typeName + &#039;&quot;? This cannot be undone.&#039;)) {
    const form = document.createElement(&#039;form&#039;);
    form.method = &#039;POST&#039;;
    
    const typeInput = document.createElement(&#039;input&#039;);
    typeInput.type = &#039;hidden&#039;;
    typeInput.name = &#039;type_name&#039;;
    typeInput.value = typeName;
    form.appendChild(typeInput);
    
    const deleteInput = document.createElement(&#039;input&#039;);
    deleteInput.type = &#039;hidden&#039;;
    deleteInput.name = &#039;delete_annotation_type&#039;;</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-groups.js (7)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_groups.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleGroup()</span><span class="function-counter">1</span> <span class="function-line">Line 7</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: toggleGroup()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_groups.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 350</code>: <small>&lt;div class=&quot;group-header&quot; onclick=&quot;toggleGroup(&#039;&lt;?= htmlspecialchars($desc[&#039;group_name&#039;]) ?&gt;&#039;)&quot; styl</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const content = document.getElementById(&#039;content-&#039; + groupName);
  const header = event.target.closest(&#039;.group-header&#039;);
  const arrow = header.querySelector(&#039;span:last-child&#039;);
  
  if (content.style.display === &#039;none&#039;) {
    content.style.display = &#039;block&#039;;
    arrow.textContent = &#039;‚ñ≤&#039;;
  } else {
    content.style.display = &#039;none&#039;;
    arrow.textContent = &#039;‚ñº&#039;;
  }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">addImage()</span><span class="function-counter">1</span> <span class="function-line">Line 21</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: addImage()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_groups.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 387</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-3&quot; onclick=&quot;addImage(&#039;&lt;?= htmlspecialchars($d</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const container = document.getElementById(&#039;images-container-&#039; + groupName);
  const newIndex = container.children.length;
  
  const html = `
    &lt;div class=&quot;image-item&quot; data-index=&quot;${newIndex}&quot; style=&quot;border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #f8f9fa;&quot;&gt;
      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeImage(&#039;${groupName}&#039;, ${newIndex})&quot; style=&quot;float: right;&quot; ${isDescFileWriteError ? &#039;disabled data-bs-tog</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">removeImage()</span><span class="function-counter">2</span> <span class="function-line">Line 42</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: removeImage()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/manage-groups.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 28</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeImage(&#039;${groupName}&#039;, </small></li>
</ul></li>
<li><strong>admin/pages/manage_groups.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 375</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeImage(&#039;&lt;?= htmlspecial</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const container = document.getElementById(&#039;images-container-&#039; + groupName);
  const items = container.querySelectorAll(&#039;.image-item&#039;);
  if (items.length &gt; 1) {
    items[index].remove();
  } else {
    alert(&#039;At least one image entry must remain (it can be empty).&#039;);
  }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">addParagraph()</span><span class="function-counter">1</span> <span class="function-line">Line 52</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: addParagraph()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_groups.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 411</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-3&quot; onclick=&quot;addParagraph(&#039;&lt;?= htmlspecialchar</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const container = document.getElementById(&#039;paragraphs-container-&#039; + groupName);
  const newIndex = container.children.length;
  
  const html = `
    &lt;div class=&quot;paragraph-item&quot; data-index=&quot;${newIndex}&quot; style=&quot;border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #f8f9fa;&quot;&gt;
      &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeParagraph(&#039;${groupName}&#039;, ${newIndex})&quot; style=&quot;float: right;&quot; ${isDescFileWriteError ? &#039;disabled</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">removeParagraph()</span><span class="function-counter">2</span> <span class="function-line">Line 79</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: removeParagraph()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/manage-groups.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 59</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeParagraph(&#039;${groupName</small></li>
</ul></li>
<li><strong>admin/pages/manage_groups.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 393</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeParagraph(&#039;&lt;?= htmlspe</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const container = document.getElementById(&#039;paragraphs-container-&#039; + groupName);
  const items = container.querySelectorAll(&#039;.paragraph-item&#039;);
  if (items.length &gt; 1) {
    items[index].remove();
  } else {
    alert(&#039;At least one paragraph entry must remain (it can be empty).&#039;);
  }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">getColorForTag()</span><span class="function-counter">7</span> <span class="function-line">Line 104</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: getColorForTag()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (7 times):</strong>
<ul>
<li><strong>js/modules/manage-groups.js</strong> (7x)
<ul style="margin-top: 5px;">
<li><code>line 119</code>: <small>getColorForTag(tag);</small></li>
<li><code>line 125</code>: <small>chip.style.background = getColorForTag(tag);</small></li>
<li><code>line 126</code>: <small>chip.style.borderColor = getColorForTag(tag);</small></li>
<li><code>line 132</code>: <small>chip.style.background = getColorForTag(groupName);</small></li>
<li><code>line 133</code>: <small>chip.style.borderColor = getColorForTag(groupName);</small></li>
<li><code>line 181</code>: <small>chip.style.background = getColorForTag(tag);</small></li>
<li><code>line 182</code>: <small>chip.style.borderColor = getColorForTag(tag);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    // If we&#039;ve already assigned a color to this tag, use it
    if (tagColorMap[tag]) {
      return tagColorMap[tag];
    }
    
    // Assign the next available color
    tagColorMap[tag] = colors[nextColorIndex % colors.length];
    nextColorIndex++;
    
    return tagColorMap[tag];
  }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renderTags()</span><span class="function-counter">4</span> <span class="function-line">Line 175</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-groups.js: renderTags()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (4 times):</strong>
<ul>
<li><strong>js/modules/manage-groups.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 186</code>: <small>renderTags();</small></li>
<li><code>line 200</code>: <small>renderTags();</small></li>
<li><code>line 219</code>: <small>renderTags();</small></li>
<li><code>line 235</code>: <small>renderTags();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
      // Render selected tags
      selectedDisplay.innerHTML = &#039;&lt;small class=&quot;text-muted&quot;&gt;Selected tags:&lt;/small&gt;&lt;br&gt;&#039;;
      selectedTags.forEach(tag =&gt; {
        const chip = document.createElement(&#039;span&#039;);
        chip.className = &#039;tag-chip selected&#039;;
        chip.style.background = getColorForTag(tag);
        chip.style.borderColor = getColorForTag(tag);
        chip.innerHTML = `${tag} &lt;span class=&quot;remove&quot;&gt;√ó&lt;/span&gt;`;
        chip.onclick = function() {
          selectedTags = selectedT</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-registry.js (1)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_js_registry.php</span>
<span class="php-page">admin/manage_registry.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateRegistry()</span><span class="function-counter">0</span> <span class="function-line">Line 9</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-registry.js: updateRegistry()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{
    const typeLabel = type === &#039;php&#039; ? &#039;PHP&#039; : &#039;JavaScript&#039;;
    const btn = event.target.closest(&#039;button&#039;);
    const originalText = btn.textContent;
    const resultDiv = document.getElementById(type + &#039;Result&#039;);
    
    btn.disabled = true;
    btn.innerHTML = &#039;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Updating...&#039;;
    resultDiv.classList.add(&#039;d-none&#039;);
    
    const data = new FormData();
    data.append(&#039;action&#039;, &#039;update_registry&#039;);
    data.append(&#039;type&#039;, type);
    
    fetch(window.loca</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-site-config.js (2)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_site_config.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">isHexColor()</span><span class="function-counter">1</span> <span class="function-line">Line 147</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-site-config.js: isHexColor()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-site-config.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 158</code>: <small>if (isHexColor(colorValue)) {</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
            return str.startsWith(&#039;#&#039;) &amp;&amp; /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(str);
        }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateBadgeColor()</span><span class="function-counter">3</span> <span class="function-line">Line 152</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-site-config.js: updateBadgeColor()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (3 times):</strong>
<ul>
<li><strong>js/modules/manage-site-config.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 178</code>: <small>updateBadgeColor(input);</small></li>
<li><code>line 182</code>: <small>updateBadgeColor(this);</small></li>
<li><code>line 185</code>: <small>updateBadgeColor(this);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
            const seqType = input.getAttribute(&#039;data-seq-type&#039;);
            const badgeElement = document.getElementById(&#039;badge_&#039; + seqType);
            if (badgeElement &amp;&amp; input.value.trim()) {
                const colorValue = input.value.trim();
                
                if (isHexColor(colorValue)) {
                    // Hex color - use inline style
                    badgeElement.style.backgroundColor = colorValue;
                    badgeElement.style.color = &#039;white&#039;;</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-taxonomy-tree.js (2)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_taxonomy_tree.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renderTreeNode()</span><span class="function-counter">2</span> <span class="function-line">Line 31</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-taxonomy-tree.js: renderTreeNode()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/manage-taxonomy-tree.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 46</code>: <small>html += renderTreeNode(child, level + 1);</small></li>
<li><code>line 59</code>: <small>previewElement.innerHTML = renderTreeNode(treeData.tree);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
        const indent = level * 20;
        const isLeaf = !!node.organism;
        const icon = isLeaf ? &#039;üß¨&#039; : (level === 0 ? &#039;üå≥&#039; : &#039;‚îú&#039;);
        
        let html = `&lt;div style=&quot;margin-left: ${indent}px; padding: 4px 0;&quot;&gt;`;
        html += `&lt;span style=&quot;font-weight: ${isLeaf ? &#039;normal&#039; : &#039;bold&#039;}; font-style: ${isLeaf ? &#039;italic&#039; : &#039;normal&#039;}&quot;&gt;`;
        html += `${icon} ${node.name}`;
        if (node.common_name) {
            html += ` &lt;span class=&quot;text-muted small&quot;&gt;(${node.common_nam</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renderTreePreview()</span><span class="function-counter">1</span> <span class="function-line">Line 56</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-taxonomy-tree.js: renderTreePreview()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-taxonomy-tree.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 24</code>: <small>renderTreePreview(currentTree);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
        const previewElement = document.getElementById(&#039;tree-preview&#039;);
        if (previewElement &amp;&amp; treeData.tree) {
            previewElement.innerHTML = renderTreeNode(treeData.tree);
        }
    }</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/manage-users.js (6)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_users.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">resetForm()</span><span class="function-counter">1</span> <span class="function-line">Line 17</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: resetForm()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_users.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 202</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; id=&quot;cancel-btn&quot; onclick=&quot;resetForm()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  document.getElementById(&#039;userForm&#039;).reset();
  document.getElementById(&#039;username&#039;).readOnly = false;
  document.getElementById(&#039;is_create&#039;).value = &#039;1&#039;;
  document.getElementById(&#039;original_username&#039;).value = &#039;&#039;;
  document.getElementById(&#039;form-title&#039;).textContent = &#039;Create New User&#039;;
  document.getElementById(&#039;submit-text&#039;).textContent = &#039;Create User&#039;;
  document.getElementById(&#039;password_label&#039;).innerHTML = &#039;Password &lt;span class=&quot;text-danger&quot;&gt;*&lt;/span&gt;&#039;;
  document.getElementById(&#039;password_he</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renderAssemblySelector()</span><span class="function-counter">4</span> <span class="function-line">Line 33</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: renderAssemblySelector()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (4 times):</strong>
<ul>
<li><strong>js/modules/manage-users.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 176</code>: <small>renderAssemblySelector();</small></li>
<li><code>line 242</code>: <small>renderAssemblySelector();</small></li>
<li><code>line 283</code>: <small>renderAssemblySelector();</small></li>
<li><code>line 345</code>: <small>renderAssemblySelector();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const container = document.getElementById(&#039;access-container&#039;);
  
  if (!container) {
    return;
  }
  
  container.innerHTML = &#039;&#039;;
  
  Object.keys(allOrganisms).sort().forEach(organism =&gt; {
    const orgDiv = document.createElement(&#039;div&#039;);
    orgDiv.className = &#039;organism-group&#039;;
    
    // Header
    const header = document.createElement(&#039;div&#039;);
    header.className = &#039;organism-toggle&#039;;
    
    const chevron = document.createElement(&#039;i&#039;);
    chevron.className = &#039;fa fa-chevron-right&#039;;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateHiddenInputs()</span><span class="function-counter">5</span> <span class="function-line">Line 126</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: updateHiddenInputs()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (5 times):</strong>
<ul>
<li><strong>js/modules/manage-users.js</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 107</code>: <small>updateHiddenInputs();</small></li>
<li><code>line 175</code>: <small>updateHiddenInputs();</small></li>
<li><code>line 243</code>: <small>updateHiddenInputs();</small></li>
<li><code>line 282</code>: <small>updateHiddenInputs();</small></li>
<li><code>line 315</code>: <small>updateHiddenInputs();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const hiddenContainer = document.getElementById(&#039;selected-assemblies-hidden&#039;);
  const previewContainer = document.getElementById(&#039;selected-preview&#039;);
  
  hiddenContainer.innerHTML = &#039;&#039;;
  previewContainer.innerHTML = &#039;&#039;;
  
  let totalCount = 0;
  
  Object.keys(selectedAccess).sort().forEach(organism =&gt; {
    selectedAccess[organism].forEach(assembly =&gt; {
      totalCount++;
      
      // Add hidden input
      const input = document.createElement(&#039;input&#039;);
      input.type = &#039;hidden&#039;;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">populateForm()</span><span class="function-counter">2</span> <span class="function-line">Line 188</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: populateForm()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/manage-users.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 285</code>: <small>populateForm(username);</small></li>
<li><code>line 365</code>: <small>populateForm(username);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  console.log(&#039;populateForm called for:&#039;, username);
  console.log(&#039;allUsers:&#039;, allUsers);
  console.log(&#039;userData:&#039;, allUsers[username]);
  
  const userData = allUsers[username];
  if (!userData) {
    console.error(&#039;User not found:&#039;, username);
    return;
  }
  
  // Fill basic fields
  document.getElementById(&#039;username&#039;).value = username;
  document.getElementById(&#039;username&#039;).readOnly = true;
  document.getElementById(&#039;email&#039;).value = userData.email || &#039;&#039;;
  document.getElementById(&#039;first</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleAccessSection()</span><span class="function-counter">1</span> <span class="function-line">Line 301</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: toggleAccessSection()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-users.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 296</code>: <small>toggleAccessSection();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const isAdmin = document.getElementById(&#039;isAdmin&#039;).checked;
  const accessSection = document.getElementById(&#039;access-section&#039;);
  const previewSection = document.getElementById(&#039;preview-section&#039;);
  const requiredBadge = document.getElementById(&#039;required-badge&#039;);
  
  if (isAdmin) {
    accessSection.style.opacity = &#039;0.5&#039;;
    accessSection.style.pointerEvents = &#039;none&#039;;
    previewSection.style.opacity = &#039;0.5&#039;;
    previewSection.style.pointerEvents = &#039;none&#039;;
    requiredBadge.style.display =</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">validateForm()</span><span class="function-counter">1</span> <span class="function-line">Line 324</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/manage-users.js: validateForm()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/manage-users.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 438</code>: <small>if (!validateForm()) {</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const isAdmin = document.getElementById(&#039;isAdmin&#039;).checked;
  const hasAssemblies = Object.keys(selectedAccess).some(org =&gt; 
    selectedAccess[org] &amp;&amp; selectedAccess[org].length &gt; 0
  );
  
  if (!isAdmin &amp;&amp; !hasAssemblies) {
    alert(&#039;Please select at least one assembly (or check Admin for full access)&#039;);
    return false;
  }
  
  return true;
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/organism-management.js (13)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_organisms.php</span>
<span class="php-page">admin/manage_organisms_old.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">escapeHtml()</span><span class="function-counter">11</span> <span class="function-line">Line 9</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: escapeHtml()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (11 times):</strong>
<ul>
<li><strong>js/permission-manager.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 52</code>: <small>&#039;&lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt; &#039; + escapeHtml(json.message) + &#039; &#039; +</small></li>
<li><code>line 61</code>: <small>&#039;&lt;i class=&quot;fa fa-times-circle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Failed:&lt;/strong&gt; &#039; + escapeHtml(json.message) + &#039;&lt;/div&gt;&#039;</small></li>
<li><code>line 69</code>: <small>&#039;&lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Error:&lt;/strong&gt; &#039; + escapeHtml(error.message) + </small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 213</code>: <small>return `&lt;div style=&quot;padding: 4px 0;&quot;&gt;&lt;span style=&quot;background: ${bgColor}; padding: 2px 6px; border-r</small></li>
</ul></li>
<li><strong>js/modules/organism-management.js</strong> (7x)
<ul style="margin-top: 5px;">
<li><code>line 50</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 165</code>: <small>html += &#039;&lt;li&gt;File owner: &lt;code&gt;&#039; + escapeHtml(response.error.owner) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 167</code>: <small>html += &#039;&lt;li&gt;Web server user: &lt;code&gt;&#039; + escapeHtml(response.error.web_user) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 169</code>: <small>html += &#039;&lt;li&gt;Web server group: &lt;code&gt;&#039; + escapeHtml(response.error.web_group) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 175</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(response.error.command) + &#039;&lt;/code&gt;&#039;;</small></li>
<li><code>line 324</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 393</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const map = {
        &#039;&amp;&#039;: &#039;&amp;amp;&#039;,
        &#039;&lt;&#039;: &#039;&amp;lt;&#039;,
        &#039;&gt;&#039;: &#039;&amp;gt;&#039;,
        &#039;&quot;&#039;: &#039;&amp;quot;&#039;,
        &quot;&#039;&quot;: &#039;&amp;#039;&#039;
    };
    return String(text).replace(/[&amp;&lt;&gt;&quot;&#039;]/g, m =&gt; map[m]);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">fixDatabasePermissions()</span><span class="function-counter">4</span> <span class="function-line">Line 20</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: fixDatabasePermissions()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (4 times):</strong>
<ul>
<li><strong>admin/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 31</code>: <small>$result = fixDatabasePermissions($db_file);</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 31</code>: <small>$result = fixDatabasePermissions($db_file);</small></li>
<li><code>line 837</code>: <small>&lt;button class=&quot;btn btn-warning btn-sm&quot; onclick=&quot;fixDatabasePermissions(event, &#039;&lt;?= $org_safe ?&gt;&#039;)&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 618</code>: <small>&lt;button class=&quot;btn btn-warning btn-sm&quot; onclick=&quot;fixDatabasePermissions(event, &#039;&lt;?= $org_safe ?&gt;&#039;)&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    event.preventDefault();
    
    const resultDiv = document.getElementById(&#039;fixResult&#039; + organism);
    const button = event.target.closest(&#039;button&#039;);
    
    button.disabled = true;
    button.innerHTML = &#039;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Fixing...&#039;;
    resultDiv.classList.add(&#039;d-none&#039;);
    
    fetch(&#039;manage_organisms.php&#039;, {
        method: &#039;POST&#039;,
        headers: {
            &#039;Content-Type&#039;: &#039;application/x-www-form-urlencoded&#039;
        },
        body: &#039;action=fix_permissions&amp;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">saveMetadata()</span><span class="function-counter">2</span> <span class="function-line">Line 75</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: saveMetadata()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1110</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot; onclick=&quot;saveMetadata(event, &#039;&lt;?= $org_safe ?&gt;&#039;)&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 891</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot; onclick=&quot;saveMetadata(event, &#039;&lt;?= $org_safe ?&gt;&#039;)&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    event.preventDefault();
    
    const form = document.getElementById(&#039;metadataForm&#039; + organism);
    const resultDiv = document.getElementById(&#039;saveResult&#039; + organism);
    const button = event.target;
    
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }
    
    // Collect images data
    const imagesContainer = document.getElementById(&#039;images-container-&#039; + organism);
    const images = [];
    imagesContainer.querySelectorAll(&#039;.image-item&#039;).forEach(</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">addMetadataImage()</span><span class="function-counter">2</span> <span class="function-line">Line 203</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: addMetadataImage()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1070</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-4&quot; onclick=&quot;addMetadataImage(&#039;&lt;?= $org_safe ?</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 851</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-4&quot; onclick=&quot;addMetadataImage(&#039;&lt;?= $org_safe ?</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const container = document.getElementById(&#039;images-container-&#039; + organism);
    const newIndex = container.children.length;
    
    const html = `
      &lt;div class=&quot;image-item&quot; data-index=&quot;${newIndex}&quot; style=&quot;border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #f8f9fa;&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataImage(&#039;${organism}&#039;, ${newIndex})&quot; style=&quot;float: right;&quot;&gt;Remove&lt;/button&gt;
        &lt;div</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">removeMetadataImage()</span><span class="function-counter">3</span> <span class="function-line">Line 225</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: removeMetadataImage()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (3 times):</strong>
<ul>
<li><strong>js/modules/organism-management.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 210</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataImage(&#039;${organ</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1057</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataImage(&#039;&lt;?= $or</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 838</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataImage(&#039;&lt;?= $or</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const container = document.getElementById(&#039;images-container-&#039; + organism);
    const items = container.querySelectorAll(&#039;.image-item&#039;);
    if (items.length &gt; 1) {
        items[index].remove();
    } else {
        alert(&#039;At least one image entry must remain (it can be empty).&#039;);
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">addMetadataParagraph()</span><span class="function-counter">2</span> <span class="function-line">Line 235</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: addMetadataParagraph()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1104</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-4&quot; onclick=&quot;addMetadataParagraph(&#039;&lt;?= $org_sa</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 885</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-primary mb-4&quot; onclick=&quot;addMetadataParagraph(&#039;&lt;?= $org_sa</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const container = document.getElementById(&#039;paragraphs-container-&#039; + organism);
    const newIndex = container.children.length;
    
    const html = `
      &lt;div class=&quot;paragraph-item&quot; data-index=&quot;${newIndex}&quot; style=&quot;border: 1px solid #dee2e6; padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #f8f9fa;&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataParagraph(&#039;${organism}&#039;, ${newIndex})&quot; style=&quot;float: right;&quot;&gt;Remove&lt;/button&gt;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">removeMetadataParagraph()</span><span class="function-counter">3</span> <span class="function-line">Line 266</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: removeMetadataParagraph()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (3 times):</strong>
<ul>
<li><strong>js/modules/organism-management.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 242</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataParagraph(&#039;${o</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1082</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataParagraph(&#039;&lt;?=</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 863</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-danger remove-btn&quot; onclick=&quot;removeMetadataParagraph(&#039;&lt;?=</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const container = document.getElementById(&#039;paragraphs-container-&#039; + organism);
    const items = container.querySelectorAll(&#039;.paragraph-item&#039;);
    if (items.length &gt; 1) {
        items[index].remove();
    } else {
        alert(&#039;At least one paragraph entry must remain (it can be empty).&#039;);
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">renameAssemblyDirectory()</span><span class="function-counter">4</span> <span class="function-line">Line 276</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: renameAssemblyDirectory()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (4 times):</strong>
<ul>
<li><strong>admin/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 51</code>: <small>$result = renameAssemblyDirectory($organism_dir, $old_name, $new_name);</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 51</code>: <small>$result = renameAssemblyDirectory($organism_dir, $old_name, $new_name);</small></li>
<li><code>line 1278</code>: <small>&lt;button class=&quot;btn btn-info btn-sm w-100&quot; onclick=&quot;renameAssemblyDirectory(event, &#039;&lt;?= htmlspecialch</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1059</code>: <small>&lt;button class=&quot;btn btn-info btn-sm w-100&quot; onclick=&quot;renameAssemblyDirectory(event, &#039;&lt;?= htmlspecialch</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    event.preventDefault();
    
    const elementId = safeAsmId || organism;
    
    const oldDir = document.getElementById(&#039;oldDirName&#039; + elementId).value;
    const newDir = document.getElementById(&#039;newDirName&#039; + elementId).value;
    const resultDiv = document.getElementById(&#039;renameResult&#039; + elementId);
    const button = event.target;
    
    if (!oldDir || !newDir) {
        resultDiv.innerHTML = &#039;&lt;div class=&quot;alert alert-warning&quot;&gt;Please select both current and new directory names&lt;/div&gt;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">deleteAssemblyDirectory()</span><span class="function-counter">4</span> <span class="function-line">Line 351</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: deleteAssemblyDirectory()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (4 times):</strong>
<ul>
<li><strong>admin/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 70</code>: <small>$result = deleteAssemblyDirectory($organism_dir, $dir_name);</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 70</code>: <small>$result = deleteAssemblyDirectory($organism_dir, $dir_name);</small></li>
<li><code>line 1311</code>: <small>&lt;button class=&quot;btn btn-danger btn-sm w-100&quot; onclick=&quot;deleteAssemblyDirectory(event, &#039;&lt;?= htmlspecial</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1092</code>: <small>&lt;button class=&quot;btn btn-danger btn-sm w-100&quot; onclick=&quot;deleteAssemblyDirectory(event, &#039;&lt;?= htmlspecial</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    event.preventDefault();
    
    const dirToDelete = document.getElementById(&#039;dirToDelete&#039; + safeAsmId).value;
    const resultDiv = document.getElementById(&#039;deleteResult&#039; + safeAsmId);
    const button = event.target;
    
    if (!dirToDelete) {
        resultDiv.innerHTML = &#039;&lt;div class=&quot;alert alert-warning&quot;&gt;Please select a directory to delete&lt;/div&gt;&#039;;
        resultDiv.classList.remove(&#039;d-none&#039;);
        return;
    }
    
    if (!confirm(&#039;‚ö†Ô∏è  CAUTION: You are about to permanently d</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">deleteCurrentAssemblyDirectory()</span><span class="function-counter">1</span> <span class="function-line">Line 419</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: deleteCurrentAssemblyDirectory()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 1201</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-danger&quot; onclick=&quot;deleteCurrentAssemblyDirectory(event, &#039;&lt;?= htm</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    event.preventDefault();
    
    // Get the current assembly name from the modal title or data attribute
    const modalElement = document.getElementById(&#039;asmModal&#039; + safeAsmId);
    const assemblyName = modalElement ? modalElement.getAttribute(&#039;data-assembly-name&#039;) : null;
    
    if (!assemblyName) {
        alert(&#039;Unable to determine assembly directory name&#039;);
        return;
    }
    
    if (!confirm(&#039;‚ö†Ô∏è  CAUTION: You are about to permanently delete the assembly directory &quot;&#039; + a</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">addFeatureTag()</span><span class="function-counter">4</span> <span class="function-line">Line 475</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: addFeatureTag()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (4 times):</strong>
<ul>
<li><strong>admin/manage_organisms_old.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 1017</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-primary mt-2&quot; onclick=&quot;addFeatureTag(&#039;&lt;?= $org_s</small></li>
<li><code>line 1034</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-info mt-2&quot; onclick=&quot;addFeatureTag(&#039;&lt;?= $org_safe</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 798</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-primary mt-2&quot; onclick=&quot;addFeatureTag(&#039;&lt;?= $org_s</small></li>
<li><code>line 815</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-sm btn-outline-info mt-2&quot; onclick=&quot;addFeatureTag(&#039;&lt;?= $org_safe</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const inputId = type + &#039;-feature-input-&#039; + organism;
    const containerId = type + &#039;-features-&#039; + organism;
    const input = document.getElementById(inputId);
    const container = document.getElementById(containerId);
    
    const feature = input.value.trim();
    if (!feature) {
        alert(&#039;Please enter a feature type&#039;);
        return;
    }
    
    // Check if already exists
    const existing = Array.from(container.querySelectorAll(&#039;.feature-tag&#039;)).map(t =&gt; t.getAttribute(&#039;dat</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">removeFeatureTag()</span><span class="function-counter">5</span> <span class="function-line">Line 504</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: removeFeatureTag()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (5 times):</strong>
<ul>
<li><strong>js/modules/organism-management.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 499</code>: <small>badge.innerHTML = `${feature} &lt;i class=&quot;fa fa-times&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;removeFeature</small></li>
</ul></li>
<li><strong>admin/manage_organisms_old.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 1012</code>: <small>&lt;?= htmlspecialchars($feature) ?&gt; &lt;i class=&quot;fa fa-times&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;removeFea</small></li>
<li><code>line 1029</code>: <small>&lt;?= htmlspecialchars($feature) ?&gt; &lt;i class=&quot;fa fa-times&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;removeFea</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 793</code>: <small>&lt;?= htmlspecialchars($feature) ?&gt; &lt;i class=&quot;fa fa-times&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;removeFea</small></li>
<li><code>line 810</code>: <small>&lt;?= htmlspecialchars($feature) ?&gt; &lt;i class=&quot;fa fa-times&quot; style=&quot;cursor: pointer;&quot; onclick=&quot;removeFea</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    element.closest(&#039;.feature-tag&#039;).remove();
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">togglePath()</span><span class="function-counter">2</span> <span class="function-line">Line 577</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/organism-management.js: togglePath()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>admin/manage_organisms_old.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 445</code>: <small>&lt;br&gt;&lt;button class=&quot;btn btn-sm btn-outline-secondary&quot; type=&quot;button&quot; onclick=&quot;togglePath(this, &#039;&lt;?= ht</small></li>
</ul></li>
<li><strong>admin/pages/manage_organisms.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 226</code>: <small>&lt;br&gt;&lt;button class=&quot;btn btn-sm btn-outline-secondary&quot; type=&quot;button&quot; onclick=&quot;togglePath(this, &#039;&lt;?= ht</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const pathId = &#039;path-&#039; + organism.replace(/[^a-zA-Z0-9]/g, &#039;_&#039;);
    let pathDiv = document.getElementById(pathId);
    
    if (pathDiv) {
        // Already exists, toggle visibility
        if (pathDiv.style.display === &#039;none&#039;) {
            pathDiv.style.display = &#039;block&#039;;
            button.innerHTML = &#039;&lt;i class=&quot;fa fa-folder-open&quot;&gt;&lt;/i&gt; Hide Path&#039;;
        } else {
            pathDiv.style.display = &#039;none&#039;;
            button.innerHTML = &#039;&lt;i class=&quot;fa fa-folder&quot;&gt;&lt;/i&gt; View Path&#039;;</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/shared-results-table.js (2)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/old/assembly_display.php</span>
<span class="php-page">tools/old/groups_display.php</span>
<span class="php-page">tools/old/multi_organism_search.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">createOrganismResultsTable()</span><span class="function-counter">1</span> <span class="function-line">Line 18</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/shared-results-table.js: createOrganismResultsTable()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/annotation-search.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 292</code>: <small>let tableHtml = createOrganismResultsTable(organism, results, this.config.sitePath, &#039;tools/parent.ph</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const tableId = &#039;#resultsTable_&#039; + organism.replace(/[^a-zA-Z0-9]/g, &#039;_&#039;);
    const selectId = organism.replace(/[^a-zA-Z0-9]/g, &#039;_&#039;);
    const genus = results[0]?.genus || &#039;&#039;;
    const species = results[0]?.species || &#039;&#039;;
    const commonName = results[0]?.common_name || &#039;&#039;;
    
    const organismDisplay = `&lt;em&gt;${genus} ${species}&lt;/em&gt;`;
    const commonNameDisplay = commonName ? ` (${commonName})` : &#039;&#039;;
    
    const fallbackId = &#039;icon-&#039; + organism.replace(/[^a-zA-Z0-9]/g, &#039;_&#039;);</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeResultsTable()</span><span class="function-counter">2</span> <span class="function-line">Line 165</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/shared-results-table.js: initializeResultsTable()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/annotation-search.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 308</code>: <small>initializeResultsTable(tableId, selectId, true);</small></li>
</ul></li>
<li><strong>js/modules/shared-results-table.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 154</code>: <small>setTimeout(() =&gt; initializeResultsTable(tableId, selectId, isUniquenameSearch), 100);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    // Populate filter containers with filter inputs and Select All button
    $(tableId + &#039; .column-filter-container&#039;).each(function(i) {
        const columnIndex = $(this).data(&#039;column-index&#039;);
        if (columnIndex === 0) {
            // Select All button for first column
            $(this).html(&#039;&lt;button style=&quot;width:110px; border-radius: 4px; white-space: nowrap; border: solid 1px #808080; padding: 0;&quot; class=&quot;btn btn_select_all&quot; id=&quot;toggle-select-btn&#039; + selectId + &#039;&quot;&gt;&lt;span&gt;Select All&lt;</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/source-list-manager.js (8)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/blast.php</span>
<span class="php-page">tools/retrieve_sequences.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">isSourceVisible()</span><span class="function-counter">6</span> <span class="function-line">Line 13</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: isSourceVisible()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (6 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 86</code>: <small>if (line &amp;&amp; !window.isSourceVisible(line)) {</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 98</code>: <small>if (line &amp;&amp; !isSourceVisible(line)) {</small></li>
<li><code>line 142</code>: <small>if (line &amp;&amp; !isSourceVisible(line)) {</small></li>
</ul></li>
<li><strong>js/modules/source-list-manager.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 63</code>: <small>if (line &amp;&amp; isSourceVisible(line)) {</small></li>
<li><code>line 114</code>: <small>if (checked &amp;&amp; isSourceVisible(checked.closest(&#039;.&#039; + sourceListClass))) {</small></li>
<li><code>line 204</code>: <small>const isHidden = (showHiddenWarning &amp;&amp; line &amp;&amp; !isSourceVisible(line)) ? &#039; ‚ö†Ô∏è (HIDDEN - FILTERED</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    if (!element) return false;
    if (element.classList.contains(&#039;hidden&#039;)) return false;
    if (element.style.display === &#039;none&#039;) return false;
    return true;
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">applySourceFilter()</span><span class="function-counter">2</span> <span class="function-line">Line 27</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: applySourceFilter()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>js/modules/source-list-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 243</code>: <small>applySourceFilter(filterId, sourceListClass);</small></li>
<li><code>line 257</code>: <small>applySourceFilter(filterId, sourceListClass);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const filterInput = document.getElementById(filterId);
    const sourceLines = document.querySelectorAll(&#039;.&#039; + sourceListClass);
    
    if (!filterInput) {
        console.warn(&#039;Filter input not found:&#039;, filterId);
        return;
    }
    
    const filterText = (filterInput.value || &#039;&#039;).toLowerCase();
    
    sourceLines.forEach(line =&gt; {
        const searchText = line.dataset.search || &#039;&#039;;
        if (filterText === &#039;&#039; || searchText.includes(filterText)) {
            line.classLis</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">autoSelectFirstVisibleSource()</span><span class="function-counter">1</span> <span class="function-line">Line 56</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: autoSelectFirstVisibleSource()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/source-list-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 164</code>: <small>selectedRadio = autoSelectFirstVisibleSource(radioName, sourceListClass, &#039;.fasta-source-list&#039;);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const allRadios = document.querySelectorAll(`input[name=&quot;${radioName}&quot;]`);
    let firstVisibleRadio = null;
    
    allRadios.forEach(radio =&gt; {
        const line = radio.closest(&#039;.&#039; + sourceListClass);
        if (line &amp;&amp; isSourceVisible(line)) {
            if (!firstVisibleRadio) {
                firstVisibleRadio = radio;
            }
        }
    });
    
    if (firstVisibleRadio) {
        // Uncheck any currently checked radios
        allRadios.forEach(radio =&gt; radio.checked</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">scrollSourceIntoView()</span><span class="function-counter">1</span> <span class="function-line">Line 93</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: scrollSourceIntoView()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/source-list-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 79</code>: <small>scrollSourceIntoView(firstVisibleRadio, sourceListClass, scrollContainerSelector);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const line = radio.closest(&#039;.&#039; + sourceListClass);
    const container = document.querySelector(scrollContainerSelector);
    
    if (line &amp;&amp; container) {
        line.scrollIntoView({ behavior: &#039;smooth&#039;, block: &#039;nearest&#039; });
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">restoreSourceSelection()</span><span class="function-counter">1</span> <span class="function-line">Line 111</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: restoreSourceSelection()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/source-list-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 160</code>: <small>let selectedRadio = restoreSourceSelection(radioName, sourceListClass);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const checked = document.querySelector(`input[name=&quot;${radioName}&quot;]:checked`);
    if (checked &amp;&amp; isSourceVisible(checked.closest(&#039;.&#039; + sourceListClass))) {
        return checked;
    }
    return null;
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearSourceFilters()</span><span class="function-counter">2</span> <span class="function-line">Line 130</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: clearSourceFilters()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 54</code>: <small>window.clearSourceFilters(&#039;sourceFilter&#039;, &#039;selected_source&#039;, &#039;fasta-source-line&#039;, null, &#039;blastForm&#039;)</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 19</code>: <small>clearSourceFilters(&#039;sourceFilter&#039;, &#039;selected_source&#039;, &#039;fasta-source-line&#039;, null, &#039;downloadForm&#039;);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const filterInput = document.getElementById(filterId);
    const sourceLines = document.querySelectorAll(&#039;.&#039; + sourceListClass);
    const filterMessage = filterMessageId ? document.getElementById(filterMessageId) : null;
    const form = document.getElementById(formId);
    
    // Clear filter input
    if (filterInput) {
        filterInput.value = &#039;&#039;;
    }
    
    // Show all source lines (remove inline display: none)
    sourceLines.forEach(line =&gt; {
        line.style.display = &#039;&#039;;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateCurrentSelectionDisplay()</span><span class="function-counter">8</span> <span class="function-line">Line 188</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: updateCurrentSelectionDisplay()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (8 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 59</code>: <small>window.updateCurrentSelectionDisplay();</small></li>
<li><code>line 74</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 95</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 139</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 71</code>: <small>window.updateCurrentSelectionDisplay(&#039;currentSelection&#039;, &#039;fasta-source-line&#039;, true);</small></li>
<li><code>line 91</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 106</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 155</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const checked = document.querySelector(&#039;input[name=&quot;selected_source&quot;]:checked&#039;);
    const selectionDiv = document.getElementById(selectionDivId);
    
    if (!selectionDiv) {
        console.warn(&#039;Selection display div not found:&#039;, selectionDivId);
        return;
    }
    
    if (checked) {
        const line = checked.closest(&#039;.&#039; + sourceListClass);
        const groupBadge = line ? line.querySelector(&#039;.badge&#039;) : null;
        const group = groupBadge ? groupBadge.textContent.trim()</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeSourceListManager()</span><span class="function-counter">2</span> <span class="function-line">Line 226</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/source-list-manager.js: initializeSourceListManager()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 68</code>: <small>initializeSourceListManager({</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 80</code>: <small>initializeSourceListManager({</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/taxonomy-tree.js (1)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_taxonomy_tree.php</span>
<span class="php-page">tools/pages/index.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initPhyloTree()</span><span class="function-counter">1</span> <span class="function-line">Line 168</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/taxonomy-tree.js: initPhyloTree()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/index.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 70</code>: <small>initPhyloTree(treeData, userAccess);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    phyloTree = new PhyloTree(&#039;taxonomy-tree-container&#039;, treeData, userAccess);
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/modules/utilities.js (5)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/error_log.php</span>
<span class="php-page">admin/manage_annotations.php</span>
<span class="php-page">admin/manage_filesystem_permissions.php</span>
<span class="php-page">admin/manage_groups.php</span>
<span class="php-page">admin/manage_organisms.php</span>
<span class="php-page">admin/manage_registry.php</span>
<span class="php-page">admin/manage_site_config.php</span>
<span class="php-page">admin/manage_taxonomy_tree.php</span>
<span class="php-page">admin/manage_users.php</span>
<span class="php-page">tools/blast.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">escapeHtml()</span><span class="function-counter">11</span> <span class="function-line">Line 11</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/utilities.js: escapeHtml()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (11 times):</strong>
<ul>
<li><strong>js/permission-manager.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 52</code>: <small>&#039;&lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt; &#039; + escapeHtml(json.message) + &#039; &#039; +</small></li>
<li><code>line 61</code>: <small>&#039;&lt;i class=&quot;fa fa-times-circle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Failed:&lt;/strong&gt; &#039; + escapeHtml(json.message) + &#039;&lt;/div&gt;&#039;</small></li>
<li><code>line 69</code>: <small>&#039;&lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Error:&lt;/strong&gt; &#039; + escapeHtml(error.message) + </small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 213</code>: <small>return `&lt;div style=&quot;padding: 4px 0;&quot;&gt;&lt;span style=&quot;background: ${bgColor}; padding: 2px 6px; border-r</small></li>
</ul></li>
<li><strong>js/modules/organism-management.js</strong> (7x)
<ul style="margin-top: 5px;">
<li><code>line 50</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 165</code>: <small>html += &#039;&lt;li&gt;File owner: &lt;code&gt;&#039; + escapeHtml(response.error.owner) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 167</code>: <small>html += &#039;&lt;li&gt;Web server user: &lt;code&gt;&#039; + escapeHtml(response.error.web_user) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 169</code>: <small>html += &#039;&lt;li&gt;Web server group: &lt;code&gt;&#039; + escapeHtml(response.error.web_group) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 175</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(response.error.command) + &#039;&lt;/code&gt;&#039;;</small></li>
<li><code>line 324</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 393</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const map = {
        &#039;&amp;&#039;: &#039;&amp;amp;&#039;,
        &#039;&lt;&#039;: &#039;&amp;lt;&#039;,
        &#039;&gt;&#039;: &#039;&amp;gt;&#039;,
        &#039;&quot;&#039;: &#039;&amp;quot;&#039;,
        &quot;&#039;&quot;: &#039;&amp;#039;&#039;
    };
    return text.replace(/[&amp;&lt;&gt;&quot;&#039;]/g, m =&gt; map[m]);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">detectSequenceType()</span><span class="function-counter">3</span> <span class="function-line">Line 29</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/utilities.js: detectSequenceType()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (3 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 182</code>: <small>const result = detectSequenceType(this.value);</small></li>
<li><code>line 196</code>: <small>const result = detectSequenceType(queryTextarea.value);</small></li>
</ul></li>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 684</code>: <small>const result = detectSequenceType(queryField.value);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    sequence = sequence.trim();
    
    if (!sequence) {
        return { type: &#039;unknown&#039;, message: &#039;&#039; };
    }
    
    // Remove all header lines (lines starting with &gt;)
    const lines = sequence.split(&#039;\n&#039;);
    let seq = lines.filter(line =&gt; !line.trim().startsWith(&#039;&gt;&#039;)).join(&#039;&#039;).toUpperCase();
    
    // Remove whitespace
    seq = seq.replace(/\s/g, &#039;&#039;);
    
    // Determine sequence type
    // Count characters to determine type
    const proteinChars = (seq.match(/[EFIPQZ]/g) || []</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">filterBlastPrograms()</span><span class="function-counter">3</span> <span class="function-line">Line 93</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/utilities.js: filterBlastPrograms()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (3 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 189</code>: <small>filterBlastPrograms(result.type, &#039;blast_program&#039;);</small></li>
<li><code>line 199</code>: <small>filterBlastPrograms(result.type, &#039;blast_program&#039;);</small></li>
</ul></li>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 691</code>: <small>filterBlastPrograms(result.type, &#039;blast_program&#039;);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const programSelect = document.getElementById(programSelectId);
    if (!programSelect) {
        return;
    }
    
    // BLAST program requirements:
    // blastn (DNA‚ÜíDNA): needs nucleotide query
    // blastp (Protein‚ÜíProtein): needs protein query
    // blastx (DNA‚ÜíProtein): needs nucleotide query
    // tblastn (Protein‚ÜíDNA): needs protein query
    // tblastx (DNA‚ÜíDNA): needs nucleotide query
    
    const proteinPrograms = [&#039;blastp&#039;, &#039;tblastn&#039;];        // Protein input</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateSequenceTypeInfo()</span><span class="function-counter">3</span> <span class="function-line">Line 139</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/utilities.js: updateSequenceTypeInfo()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (3 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 185</code>: <small>updateSequenceTypeInfo(result.message, &#039;sequenceTypeInfo&#039;, &#039;sequenceTypeMessage&#039;);</small></li>
<li><code>line 197</code>: <small>updateSequenceTypeInfo(result.message, &#039;sequenceTypeInfo&#039;, &#039;sequenceTypeMessage&#039;);</small></li>
</ul></li>
<li><strong>tools/blast.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 687</code>: <small>updateSequenceTypeInfo(result.message, &#039;sequenceTypeInfo&#039;, &#039;sequenceTypeMessage&#039;);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const container = document.getElementById(containerElementId);
    const messageEl = document.getElementById(messageElementId);
    
    if (!container || !messageEl) {
        return;
    }
    
    if (message) {
        messageEl.textContent = message;
        container.style.display = &#039;block&#039;;
    } else {
        container.style.display = &#039;none&#039;;
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateDatabaseList()</span><span class="function-counter">7</span> <span class="function-line">Line 161</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/modules/utilities.js: updateDatabaseList()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (7 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 73</code>: <small>updateDatabaseList();</small></li>
<li><code>line 96</code>: <small>updateDatabaseList();</small></li>
<li><code>line 142</code>: <small>updateDatabaseList();</small></li>
<li><code>line 190</code>: <small>updateDatabaseList();</small></li>
</ul></li>
<li><strong>tools/blast.php</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 300</code>: <small>&lt;select id=&quot;blast_program&quot; name=&quot;blast_program&quot; class=&quot;form-control&quot; onchange=&quot;updateDatabaseList();</small></li>
<li><code>line 385</code>: <small>onchange=&quot;updateDatabaseList();&quot;</small></li>
<li><code>line 695</code>: <small>updateDatabaseList();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    // Safety check - databasesByAssembly needs to be defined
    if (typeof databasesByAssembly === &#039;undefined&#039;) {
        console.error(&#039;databasesByAssembly not loaded yet&#039;);
        return;
    }
    
    const selectedRadio = document.querySelector(&#039;input[name=&quot;selected_source&quot;]:checked&#039;);
    const program = document.getElementById(&#039;blast_program&#039;).value;
    const dbBadges = document.getElementById(&#039;databaseBadges&#039;);
    
    if (!dbBadges) {
        console.error(&#039;databaseBadges element</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/permission-manager.js (3)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_organisms_old.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">fixFilePermissions()</span><span class="function-counter">0</span> <span class="function-line">Line 16</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/permission-manager.js: fixFilePermissions()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{
  event.preventDefault();
  
  const resultDiv = document.getElementById(resultId);
  const button = event.target.closest(&#039;button&#039;);
  
  if (!resultDiv) {
    console.error(&#039;Result div not found: &#039; + resultId);
    return;
  }
  
  // Disable button and show loading
  const originalHtml = button.innerHTML;
  button.disabled = true;
  button.innerHTML = &#039;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Fixing...&#039;;
  
  resultDiv.innerHTML = &#039;&lt;div class=&quot;alert alert-info small&quot;&gt;Processing...&lt;/div&gt;&#039;;</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">md5()</span><span class="function-counter">0</span> <span class="function-line">Line 79</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/permission-manager.js: md5()</div>
<div class="function-details">
<p><em>Not called anywhere</em></p>
<div class="function-code">
<code>{
  // Simple hash function - not cryptographically secure but good for IDs
  let hash = 0;
  if (str.length === 0) return hash.toString();
  
  for (let i = 0; i &lt; str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash &lt;&lt; 5) - hash) + char;
    hash = hash &amp; hash; // Convert to 32bit integer
  }
  
  return Math.abs(hash).toString(16);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">escapeHtml()</span><span class="function-counter">11</span> <span class="function-line">Line 96</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/permission-manager.js: escapeHtml()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (11 times):</strong>
<ul>
<li><strong>js/permission-manager.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 52</code>: <small>&#039;&lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt; &#039; + escapeHtml(json.message) + &#039; &#039; +</small></li>
<li><code>line 61</code>: <small>&#039;&lt;i class=&quot;fa fa-times-circle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Failed:&lt;/strong&gt; &#039; + escapeHtml(json.message) + &#039;&lt;/div&gt;&#039;</small></li>
<li><code>line 69</code>: <small>&#039;&lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Error:&lt;/strong&gt; &#039; + escapeHtml(error.message) + </small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 213</code>: <small>return `&lt;div style=&quot;padding: 4px 0;&quot;&gt;&lt;span style=&quot;background: ${bgColor}; padding: 2px 6px; border-r</small></li>
</ul></li>
<li><strong>js/modules/organism-management.js</strong> (7x)
<ul style="margin-top: 5px;">
<li><code>line 50</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 165</code>: <small>html += &#039;&lt;li&gt;File owner: &lt;code&gt;&#039; + escapeHtml(response.error.owner) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 167</code>: <small>html += &#039;&lt;li&gt;Web server user: &lt;code&gt;&#039; + escapeHtml(response.error.web_user) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 169</code>: <small>html += &#039;&lt;li&gt;Web server group: &lt;code&gt;&#039; + escapeHtml(response.error.web_group) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 175</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(response.error.command) + &#039;&lt;/code&gt;&#039;;</small></li>
<li><code>line 324</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 393</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
  const div = document.createElement(&#039;div&#039;);
  div.textContent = text;
  return div.innerHTML;
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/registry.js (14)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">admin/manage_js_registry.php</span>
<span class="php-page">admin/manage_registry.php</span>
<span class="php-page">admin/registry-template.php</span>
<span class="php-page">admin/pages/manage_js_registry.php</span>
<span class="php-page">admin/pages/manage_registry.php</span>
<span class="php-page">admin/tools/generate_registry_json.php</span>
<span class="php-page">tools/generate_registry_json.php</span>
<span class="php-page">tools/js_registry.php</span>
<span class="php-page">tools/registry-template.php</span>
<span class="php-page">tools/registry.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">loadRegistry()</span><span class="function-counter">1</span> <span class="function-line">Line 8</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: loadRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 340</code>: <small>loadRegistry();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    updateStats();
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateStats()</span><span class="function-counter">1</span> <span class="function-line">Line 15</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: updateStats()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 10</code>: <small>updateStats();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    // If we have registry data available, use it directly
    const dataElement = document.getElementById(&#039;registryData&#039;);
    if (dataElement) {
        try {
            const data = JSON.parse(dataElement.textContent);
            const unusedEl = document.getElementById(&#039;unusedCount&#039;);
            if (unusedEl &amp;&amp; data.unused) {
                unusedEl.textContent = data.unused.length;
                return; // Don&#039;t calculate from DOM if we have JSON data
            }
        } catch(e</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">generateRegistry()</span><span class="function-counter">4</span> <span class="function-line">Line 67</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: generateRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 58</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 58</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 41</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 202</code>: <small>&lt;button class=&quot;btn btn-primary w-100&quot; onclick=&quot;generateRegistry()&quot; id=&quot;generateBtn&quot; data-registry-ty</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const btn = document.getElementById(&#039;generateBtn&#039;);
    const msg = document.getElementById(&#039;registryMessage&#039;);
    
    if (!btn) return;
    
    const registryType = btn.dataset.registryType || &#039;php&#039;;
    
    btn.disabled = true;
    btn.innerHTML = &#039;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt; Generating...&#039;;
    
    fetch(&#039;/admin/api/generate_registry.php&#039;, {
        method: &#039;POST&#039;,
        headers: {
            &#039;Content-Type&#039;: &#039;application/json&#039;
        },
        body: JSON.stringify({</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">filterFunctions()</span><span class="function-counter">6</span> <span class="function-line">Line 116</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: filterFunctions()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (6 times):</strong>
<ul>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 332</code>: <small>filterFunctions();</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (5x)
<ul style="margin-top: 5px;">
<li><code>line 334</code>: <small>$html .= &quot;                &lt;input type=\&quot;text\&quot; id=\&quot;searchInput\&quot; placeholder=\&quot;üîç Search...\&quot; onk</small></li>
<li><code>line 338</code>: <small>$html .= &quot;                    &lt;input type=\&quot;radio\&quot; name=\&quot;searchMode\&quot; value=\&quot;all\&quot; checked onchan</small></li>
<li><code>line 342</code>: <small>$html .= &quot;                    &lt;input type=\&quot;radio\&quot; name=\&quot;searchMode\&quot; value=\&quot;name\&quot; onchange=\&quot;fi</small></li>
<li><code>line 346</code>: <small>$html .= &quot;                    &lt;input type=\&quot;radio\&quot; name=\&quot;searchMode\&quot; value=\&quot;code\&quot; onchange=\&quot;fi</small></li>
<li><code>line 350</code>: <small>$html .= &quot;                    &lt;input type=\&quot;radio\&quot; name=\&quot;searchMode\&quot; value=\&quot;comment\&quot; onchange=\</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const searchInput = document.getElementById(&#039;searchInput&#039;);
    if (!searchInput) return;
    
    const searchTerm = searchInput.value.toLowerCase();
    const searchMode = document.querySelector(&#039;input[name=&quot;searchMode&quot;]:checked&#039;);
    const mode = searchMode ? searchMode.value : &#039;all&#039;;
    const fileSections = document.querySelectorAll(&#039;.file-section&#039;);
    
    let visibleSections = 0;
    let totalMatches = 0;
    
    fileSections.forEach(section =&gt; {
        const fileHeader = secti</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleFile()</span><span class="function-counter">5</span> <span class="function-line">Line 197</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleFile()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (5 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 161</code>: <small>toggleFile(header);</small></li>
</ul></li>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 356</code>: <small>toggleFile(this);</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 405</code>: <small>$html .= &quot;            &lt;div class=\&quot;file-header\&quot; onclick=\&quot;toggleFile(this)\&quot;&gt;üìÑ &quot; . htmlspecialch</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 390</code>: <small>header.onclick = function() { toggleFile(this); };</small></li>
<li><code>line 494</code>: <small>toggleFile(this);</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const list = header.nextElementSibling;
    if (list &amp;&amp; list.classList.contains(&#039;functions-list&#039;)) {
        list.classList.toggle(&#039;open&#039;);
        const arrow = header.querySelector(&#039;.expand-arrow&#039;);
        if (arrow) {
            arrow.textContent = list.classList.contains(&#039;open&#039;) ? &#039;‚ñº&#039; : &#039;‚ñ∂&#039;;
        }
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleAll()</span><span class="function-counter">4</span> <span class="function-line">Line 211</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleAll()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 263</code>: <small>toggleAll();</small></li>
</ul></li>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 226</code>: <small>toggleAll();</small></li>
</ul></li>
<li><strong>tools/generate_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 306</code>: <small>$html .= &quot;&lt;button id=\&quot;toggleBtn\&quot; onclick=\&quot;toggleAll()\&quot; style=\&quot;flex: 1; padding: 10px; backgroun</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 398</code>: <small>$html .= &quot;            &lt;button id=\&quot;toggleBtn\&quot; onclick=\&quot;toggleAll()\&quot; style=\&quot;flex: 1; padding: 10p</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const lists = document.querySelectorAll(&#039;.functions-list&#039;);
    const hiddenCount = document.querySelectorAll(&#039;.functions-list:not(.open)&#039;).length;
    
    lists.forEach(list =&gt; {
        if (hiddenCount &gt; 0) {
            list.classList.add(&#039;open&#039;);
        } else {
            list.classList.remove(&#039;open&#039;);
        }
    });
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 224</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 311</code>: <small>&lt;button class=&quot;btn btn-sm btn-light&quot; onclick=&quot;toggleAllFiles()&quot; title=&quot;Toggle all sections&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    toggleAll();
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">expandAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 231</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: expandAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 96</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;expandAllFiles()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    document.querySelectorAll(&#039;.functions-list&#039;).forEach(list =&gt; {
        list.classList.add(&#039;open&#039;);
    });
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">collapseAllFiles()</span><span class="function-counter">1</span> <span class="function-line">Line 240</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: collapseAllFiles()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 99</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;collapseAllFiles()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    document.querySelectorAll(&#039;.functions-list&#039;).forEach(list =&gt; {
        list.classList.remove(&#039;open&#039;);
    });
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleCode()</span><span class="function-counter">2</span> <span class="function-line">Line 249</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleCode()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 265</code>: <small>toggleCode(header);</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 413</code>: <small>$html .= &quot;                    &lt;div class=\&quot;function-header\&quot; onclick=\&quot;toggleCode(this)\&quot;&gt;\n&quot;;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const item = header.closest(&#039;.function-item&#039;);
    if (!item) return;
    
    const codeBlock = item.querySelector(&#039;.function-code&#039;);
    if (codeBlock) {
        codeBlock.classList.toggle(&#039;open&#039;);
        const arrow = header.querySelector(&#039;.expand-arrow&#039;);
        if (arrow) {
            arrow.textContent = codeBlock.classList.contains(&#039;open&#039;) ? &#039;‚ñº&#039; : &#039;‚ñ∂&#039;;
        }
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleFunctionCode()</span><span class="function-counter">2</span> <span class="function-line">Line 263</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleFunctionCode()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>js/manage-registry.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 73</code>: <small>funcHeader.onclick = function() { toggleFunctionCode(this); };</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 407</code>: <small>funcHeader.onclick = function() { toggleFunctionCode(this); };</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    toggleCode(header);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">downloadRegistry()</span><span class="function-counter">4</span> <span class="function-line">Line 270</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: downloadRegistry()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 63</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 63</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 46</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 207</code>: <small>&lt;button class=&quot;btn btn-info w-100&quot; onclick=&quot;downloadRegistry()&quot; title=&quot;Download as JSON&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const registryType = document.body.dataset.registryType || &#039;php&#039;;
    const fileSections = document.querySelectorAll(&#039;.file-section&#039;);
    const registry = {};
    
    fileSections.forEach(section =&gt; {
        const fileHeader = section.querySelector(&#039;.file-header-title&#039;);
        const fileName = fileHeader ? fileHeader.textContent.trim() : &#039;unknown&#039;;
        registry[fileName] = [];
        
        section.querySelectorAll(&#039;.function-item&#039;).forEach(item =&gt; {
            const funcNameE</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">toggleUnused()</span><span class="function-counter">2</span> <span class="function-line">Line 313</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: toggleUnused()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (2 times):</strong>
<ul>
<li><strong>tools/generate_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 289</code>: <small>$html .= &quot;&lt;div class=\&quot;unused-header\&quot; onclick=\&quot;toggleUnused(this)\&quot;&gt;\n&quot;;</small></li>
</ul></li>
<li><strong>tools/generate_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 381</code>: <small>$html .= &quot;            &lt;div style=\&quot;background: #cc0000; color: white; padding: 15px 20px; font-weigh</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const content = header.nextElementSibling;
    if (content &amp;&amp; content.classList.contains(&#039;unused-content&#039;)) {
        content.classList.toggle(&#039;hidden&#039;);
        const arrow = header.querySelector(&#039;.unusedArrow&#039;);
        if (arrow) {
            arrow.textContent = content.classList.contains(&#039;hidden&#039;) ? &#039;‚ñ∂&#039; : &#039;‚ñº&#039;;
        }
    }
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearSearch()</span><span class="function-counter">4</span> <span class="function-line">Line 327</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/registry.js: clearSearch()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 4 file(s) (4 times):</strong>
<ul>
<li><strong>admin/pages/manage_js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 160</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>admin/pages/manage_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 160</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/js_registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 102</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
<li><strong>tools/pages/registry.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 293</code>: <small>&lt;button class=&quot;btn btn-sm btn-secondary&quot; onclick=&quot;clearSearch()&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const input = document.getElementById(&#039;searchInput&#039;);
    if (input) {
        input.value = &#039;&#039;;
        filterFunctions();
    }
}</code>
</div>
</div>
</div>
</div>
</div>
<div class="file-section">
<div class="file-header">üìÑ js/sequence-retrieval.js (6)</div>
<div class="functions-list hidden">
<div class="file-info">
<strong>üìã Included in:</strong>
<div class="php-pages">
<span class="php-page">tools/retrieve_sequences.php</span>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">escapeHtml()</span><span class="function-counter">11</span> <span class="function-line">Line 6</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: escapeHtml()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 3 file(s) (11 times):</strong>
<ul>
<li><strong>js/permission-manager.js</strong> (3x)
<ul style="margin-top: 5px;">
<li><code>line 52</code>: <small>&#039;&lt;i class=&quot;fa fa-check-circle&quot;&gt;&lt;/i&gt; &#039; + escapeHtml(json.message) + &#039; &#039; +</small></li>
<li><code>line 61</code>: <small>&#039;&lt;i class=&quot;fa fa-times-circle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Failed:&lt;/strong&gt; &#039; + escapeHtml(json.message) + &#039;&lt;/div&gt;&#039;</small></li>
<li><code>line 69</code>: <small>&#039;&lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt; &lt;strong&gt;Error:&lt;/strong&gt; &#039; + escapeHtml(error.message) + </small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 213</code>: <small>return `&lt;div style=&quot;padding: 4px 0;&quot;&gt;&lt;span style=&quot;background: ${bgColor}; padding: 2px 6px; border-r</small></li>
</ul></li>
<li><strong>js/modules/organism-management.js</strong> (7x)
<ul style="margin-top: 5px;">
<li><code>line 50</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 165</code>: <small>html += &#039;&lt;li&gt;File owner: &lt;code&gt;&#039; + escapeHtml(response.error.owner) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 167</code>: <small>html += &#039;&lt;li&gt;Web server user: &lt;code&gt;&#039; + escapeHtml(response.error.web_user) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 169</code>: <small>html += &#039;&lt;li&gt;Web server group: &lt;code&gt;&#039; + escapeHtml(response.error.web_group) + &#039;&lt;/code&gt;&lt;/li&gt;&#039;;</small></li>
<li><code>line 175</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(response.error.command) + &#039;&lt;/code&gt;&#039;;</small></li>
<li><code>line 324</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
<li><code>line 393</code>: <small>html += &#039;&lt;code class=&quot;text-break&quot;&gt;&#039; + escapeHtml(data.command) + &#039;&lt;/code&gt;&lt;br&gt;&#039;;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const map = {
        &#039;&amp;&#039;: &#039;&amp;amp;&#039;,
        &#039;&lt;&#039;: &#039;&amp;lt;&#039;,
        &#039;&gt;&#039;: &#039;&amp;gt;&#039;,
        &#039;&quot;&#039;: &#039;&amp;quot;&#039;,
        &quot;&#039;&quot;: &#039;&amp;#039;&#039;
    };
    return text.replace(/[&amp;&lt;&gt;&quot;&#039;]/g, m =&gt; map[m]);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">clearSourceFilter()</span><span class="function-counter">1</span> <span class="function-line">Line 17</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: clearSourceFilter()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>tools/retrieve_sequences.php</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 293</code>: <small>&lt;button type=&quot;button&quot; class=&quot;btn btn-success&quot; onclick=&quot;clearSourceFilter();&quot;&gt;</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    clearSourceFilters(&#039;sourceFilter&#039;, &#039;selected_source&#039;, &#039;fasta-source-line&#039;, null, &#039;downloadForm&#039;);
}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeSequenceRetrieval()</span><span class="function-counter">2</span> <span class="function-line">Line 21</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: initializeSequenceRetrieval()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (2 times):</strong>
<ul>
<li><strong>js/sequence-retrieval.js</strong> (2x)
<ul style="margin-top: 5px;">
<li><code>line 297</code>: <small>initializeSequenceRetrieval({ shouldScroll: shouldScroll });</small></li>
<li><code>line 304</code>: <small>initializeSequenceRetrieval({ shouldScroll: shouldScroll });</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{}</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateCurrentSelectionDisplay()</span><span class="function-counter">8</span> <span class="function-line">Line 70</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: updateCurrentSelectionDisplay()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 2 file(s) (8 times):</strong>
<ul>
<li><strong>js/blast-manager.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 59</code>: <small>window.updateCurrentSelectionDisplay();</small></li>
<li><code>line 74</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 95</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 139</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
<li><strong>js/sequence-retrieval.js</strong> (4x)
<ul style="margin-top: 5px;">
<li><code>line 71</code>: <small>window.updateCurrentSelectionDisplay(&#039;currentSelection&#039;, &#039;fasta-source-line&#039;, true);</small></li>
<li><code>line 91</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 106</code>: <small>updateCurrentSelectionDisplay();</small></li>
<li><code>line 155</code>: <small>updateCurrentSelectionDisplay();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
        window.updateCurrentSelectionDisplay(&#039;currentSelection&#039;, &#039;fasta-source-line&#039;, true);
        const selectionDiv = document.getElementById(&#039;currentSelection&#039;);
        const checked = document.querySelector(&#039;input[name=&quot;selected_source&quot;]:checked&#039;);
        if (!checked) {
            selectionDiv.innerHTML = &#039;&lt;span style=&quot;color: #999;&quot;&gt;None selected&lt;/span&gt;&#039;;
        }
    }</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">updateSearchIdsDisplay()</span><span class="function-counter">1</span> <span class="function-line">Line 165</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: updateSearchIdsDisplay()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/sequence-retrieval.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 225</code>: <small>updateSearchIdsDisplay();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
        if (!featureIdsTextarea) return;
        
        // Get user input IDs
        const rawIds = featureIdsTextarea.value.trim();
        const userInputIds = rawIds
            .split(/[\n,]+/)
            .map(id =&gt; id.trim())
            .filter(id =&gt; id.length &gt; 0);
        
        // Get found IDs from server (IDs that were actually returned by blastdbcmd)
        let foundIds = [];
        if (foundIdsField &amp;&amp; foundIdsField.value) {
            try {
                foundIds = JSO</code>
</div>
</div>
</div>
<div class="function-item">
<div class="function-header" onclick="toggleFunctionDetails(this)">
<div><span class="function-name">initializeCopyTooltips()</span><span class="function-counter">1</span> <span class="function-line">Line 245</span></div>
<span class="expand-arrow">‚ñ∂</span>
</div>
<div style="font-family: 'Courier New', monospace; font-size: 12px; color: #666; padding: 8px 15px; border-bottom: 1px solid #ecf0f1; user-select: all; cursor: copy;" title="Click to select">js/sequence-retrieval.js: initializeCopyTooltips()</div>
<div class="function-details">
<div class="function-usages">
<strong>üìç Called in 1 file(s) (1 times):</strong>
<ul>
<li><strong>js/modules/copy-to-clipboard.js</strong> (1x)
<ul style="margin-top: 5px;">
<li><code>line 26</code>: <small>initializeCopyTooltips();</small></li>
</ul></li>
</ul>
</div>
<div class="function-code">
<code>{
    const copyables = document.querySelectorAll(&quot;.copyable&quot;);
    copyables.forEach(el =&gt; {
        // Custom simple tooltip that follows cursor
        el.addEventListener(&quot;mouseenter&quot;, function() {
            // Remove any existing tooltip
            const existing = document.getElementById(&quot;custom-copy-tooltip&quot;);
            if (existing) existing.remove();
            
            // Create simple tooltip
            const tooltip = document.createElement(&quot;div&quot;);
            tooltip.id =</code>
</div>
</div>
</div>
</div>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.file-header').forEach(h => h.addEventListener('click', function() {
    this.closest('.file-section').querySelector('.functions-list').classList.toggle('hidden');
  }));
});

function toggleFunctionDetails(header) {
  const details = header.parentElement.querySelector('.function-details');
  const arrow = header.querySelector('.expand-arrow');
  details.classList.toggle('shown');
  arrow.textContent = details.classList.contains('shown') ? '‚ñº' : '‚ñ∂';
}

function toggleUnused(header) {
  const content = header.nextElementSibling;
  const arrow = header.querySelector('.unusedArrow');
  content.classList.toggle('hidden');
  arrow.textContent = content.classList.contains('hidden') ? '‚ñ∂' : '‚ñº';
}

function expandAll() {
  document.querySelectorAll('.functions-list').forEach(list => list.classList.remove('hidden'));
}

function collapseAll() {
  document.querySelectorAll('.functions-list').forEach(list => list.classList.add('hidden'));
}

function toggleAll() {
  const lists = document.querySelectorAll('.functions-list');
  const hiddenCount = document.querySelectorAll('.functions-list.hidden').length;
  const btn = document.getElementById('toggleBtn');
  if (hiddenCount > 0) {
    expandAll();
    btn.textContent = 'üìÅ Collapse All';
  } else {
    collapseAll();
    btn.textContent = 'üìÇ Expand All';
  }
}

function updateToggleButton() {
  const btn = document.getElementById('toggleBtn');
  const hiddenCount = document.querySelectorAll('.functions-list.hidden').length;
  if (hiddenCount === 0) {
    btn.textContent = 'üìÅ Collapse All';
  } else {
    btn.textContent = 'üìÇ Expand All';
  }
}

function filterSearch() {
  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
  const searchMode = document.querySelector('input[name="searchMode"]:checked').value;
  const fileSections = document.querySelectorAll('.file-section');
  
  fileSections.forEach(section => {
    const fileName = section.querySelector('.file-header').textContent.toLowerCase();
    const functionItems = section.querySelectorAll('.function-item');
    let hasVisibleFunction = false;
    
    functionItems.forEach(item => {
      const funcName = item.querySelector('.function-name').textContent.toLowerCase();
      const funcCode = item.querySelector('.function-details') ? item.querySelector('.function-details').textContent.toLowerCase() : '';
      const funcComment = item.querySelector('.function-comment') ? item.querySelector('.function-comment').textContent.toLowerCase() : '';
      
      let match = false;
      
      if (searchMode === 'all') {
        match = funcName.includes(searchTerm) || funcCode.includes(searchTerm) || funcComment.includes(searchTerm) || fileName.includes(searchTerm);
      } else if (searchMode === 'name') {
        match = funcName.includes(searchTerm);
      } else if (searchMode === 'code') {
        match = funcCode.includes(searchTerm);
      } else if (searchMode === 'comment') {
        match = funcComment.includes(searchTerm);
      }
      
      if (searchTerm === '' || match) {
        item.classList.remove('hidden-search');
        hasVisibleFunction = true;
      } else {
        item.classList.add('hidden-search');
      }
    });
    
    if (searchTerm === '' || hasVisibleFunction || fileName.includes(searchTerm)) {
      section.classList.remove('hidden-search');
      if (searchTerm !== '') {
        section.querySelector('.functions-list').classList.remove('hidden');
      } else {
        section.querySelector('.functions-list').classList.add('hidden');
      }
    } else {
      section.classList.add('hidden-search');
    }
  });
  updateToggleButton();
}
</script>
</body>
</html>
